"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6792],{53539:function(e,t,r){r.d(t,{Client:function(){return sh},Long:function(){return C.Z},VisibilityType:function(){return q.VisibilityType}}),r(28660);var n=r(72316),i=r(64100),a=r(87664),s=r(16441),o=r(29251),l=r(83465),u=r.n(l),c=r(29208),p=r.n(c),d=r(94150),g=r.n(d),y=r(31468),h=r.n(y),m=r(58254),f=r.n(m),w=r(51091),b=r(34015),C=r(72080),S=r(11368),x=r(33401),B=r(3639),A=r(27467),E=r(76229),v=r(97786),T=r(23193),I=r(76176),M=r(16150),R=r(12077),P=r(16735),G=r(71393),O=r(20740),_=r(48513),k=r(24658),U=r(73034),L=r(37481),N=r(40674),q=r(76933),D=r(98896),j=r(79755),Q=r(75266),H=r(54098),V=r.n(H),F=r(11555),z=r(50943),$=r(67523),K=r(15959),Z=r(18240),W=r(98051),X=r(35969),J=r(39152),Y=r(16932),ee=r(80569),et=r.n(ee),er=r(79856),en=r(92823),ei=r(4443),ea=r(61785),es=r(45328),eo=r(27484),el=r.n(eo),eu=r(70178),ec=r.n(eu),ep=r(29387),ed=r.n(ep),eg=r(23741),ey=r(85651),eh=r(91717),em=r(86344),ef=r(95084),ew=r(74087),eb=r(91674),eC=r(69721);e=r.hmd(e);var eS=r(48764).Buffer;function ex(e,t,r,n){var i,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function eB(e,t){return function(r,n){t(r,n,e)}}function eA(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}"function"==typeof SuppressedError&&SuppressedError;let eE=(e,t)=>i.Any.fromPartial({typeUrl:e,value:t}),ev=(e,t,r)=>({types:e,primaryType:"Tx",domain:{name:"Greenfield Tx",version:"1.0.0",chainId:t,verifyingContract:"0x71e835aff094655dEF897fbc85534186DbeaB75d",salt:"0"},message:r}),eT=(e,t,r,n,i,a,s)=>{let o={account_number:e,chain_id:r,sequence:t,memo:n,fee:i,timeout_height:s};return 0==Object.keys(a).length||(a.hasOwnProperty("msg1")?o={...o,...a}:o.msg1=a),o},eI=e=>{let t={Coin:[{name:"denom",type:"string"},{name:"amount",type:"uint256"}],EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"string"},{name:"salt",type:"string"}],Fee:[{name:"amount",type:"Coin[]"},{name:"gas_limit",type:"uint256"},{name:"payer",type:"string"},{name:"granter",type:"string"}],Tx:[{name:"account_number",type:"uint256"},{name:"chain_id",type:"uint256"},{name:"fee",type:"Fee"},{name:"memo",type:"string"},{name:"sequence",type:"uint256"},{name:"timeout_height",type:"uint256"}]};if(Array.isArray(e)){for(let r=0;r<e.length;r++)t.Tx.push({name:`msg${r+1}`,type:`Msg${r+1}`});Object.assign(t,...e)}else if("object"==typeof e){let r=Object.keys(e).filter(e=>e.startsWith("Msg")).length;for(let e=0;e<r;e++)t.Tx.push({name:`msg${e+1}`,type:`Msg${e+1}`});Object.assign(t,e)}else t.Tx.push({name:"msg1",type:"Msg1"}),Object.assign(t,e);return g()(t,e=>f()(e,["name"]))},eM=(e,t,r,n,i)=>({amount:[{amount:e,denom:t}],gas_limit:r,payer:n,granter:i}),eR=e=>{let t=[];return e.forEach((e,r)=>{if(0===r)t.push(e);else{let n=JSON.stringify(e),i=n.replaceAll("Msg1",`Msg${r+1}`);t.push(JSON.parse(i))}}),t},eP=e=>{let t=e.map(e=>e.MsgSDK),r={};return t.forEach((t,n)=>{r[`msg${n+1}`]={...t,type:e[n].typeUrl}}),r},eG=e=>{let t=[];return!function e(r,n=[]){if("object"==typeof r&&null!==r)for(let i in r){let a=[...n,i];"value"===i&&t.push(a),e(r[i],a)}}(e),t},eO=(e,t)=>{let r=u()(e);return t.forEach(e=>{let t=e.join("."),n=p()(r,t);n.startsWith("ZXl")?h()(r,t,(0,o.ZN)(a.J(n))):n.startsWith("eyJ")&&h()(r,t,(0,s.Dv)(a.J(n)))}),r};function e_(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function ek(e,...t){if(!(e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function eU(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");e_(e.outputLen),e_(e.blockLen)}function eL(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function eN(e,t){ek(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let eq={number:e_,bool:function(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)},bytes:ek,hash:eU,exists:eL,output:eN},eD="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,ej=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),eQ=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),eH=(e,t)=>e<<32-t|e>>>t,eV=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],eF=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function ez(e){for(let t=0;t<e.length;t++)e[t]=eF(e[t])}let e$=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function eK(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function eZ(e){return"string"==typeof e&&(e=eK(e)),ek(e),e}class eW{clone(){return this._cloneInto()}}function eX(e){let t=t=>e().update(eZ(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function eJ(e=32){if(eD&&"function"==typeof eD.getRandomValues)return eD.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}let eY=(e,t,r)=>e&t^~e&r,e0=(e,t,r)=>e&t^e&r^t&r;class e1 extends eW{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=eQ(this.buffer)}update(e){eL(this);let{view:t,buffer:r,blockLen:n}=this;e=eZ(e);let i=e.length;for(let a=0;a<i;){let s=Math.min(n-this.pos,i-a);if(s===n){let t=eQ(e);for(;n<=i-a;a+=n)this.process(t,a);continue}r.set(e.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){eL(this),eN(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let e=a;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),l=n?4:0,u=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+u,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=eQ(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(r),e}}let e2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),e3=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),e4=new Uint32Array(64);class e8 extends e1{constructor(){super(64,32,8,!1),this.A=0|e3[0],this.B=0|e3[1],this.C=0|e3[2],this.D=0|e3[3],this.E=0|e3[4],this.F=0|e3[5],this.G=0|e3[6],this.H=0|e3[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[e,t,r,n,i,a,s,o]}set(e,t,r,n,i,a,s,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)e4[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=e4[e-15],r=e4[e-2],n=eH(t,7)^eH(t,18)^t>>>3,i=eH(r,17)^eH(r,19)^r>>>10;e4[e]=i+e4[e-7]+n+e4[e-16]|0}let{A:r,B:n,C:i,D:a,E:s,F:o,G:l,H:u}=this;for(let e=0;e<64;e++){let t=eH(s,6)^eH(s,11)^eH(s,25),c=u+t+eY(s,o,l)+e2[e]+e4[e]|0,p=eH(r,2)^eH(r,13)^eH(r,22),d=p+e0(r,n,i)|0;u=l,l=o,o=s,s=a+c|0,a=i,i=n,n=r,r=c+d|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,o=o+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,a,s,o,l,u)}roundClean(){e4.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let e5=eX(()=>new e8),e6=BigInt(0),e7=BigInt(1),e9=BigInt(2);function te(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function tt(e){if(!te(e))throw Error("Uint8Array expected")}let tr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tn(e){tt(e);let t="";for(let r=0;r<e.length;r++)t+=tr[e[r]];return t}function ti(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function ta(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}let ts={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function to(e){return e>=ts._0&&e<=ts._9?e-ts._0:e>=ts._A&&e<=ts._F?e-(ts._A-10):e>=ts._a&&e<=ts._f?e-(ts._a-10):void 0}function tl(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=to(e.charCodeAt(i)),a=to(e.charCodeAt(i+1));if(void 0===r||void 0===a){let t=e[i]+e[i+1];throw Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+a}return n}function tu(e){return ta(tn(e))}function tc(e){return tt(e),ta(tn(Uint8Array.from(e).reverse()))}function tp(e,t){return tl(e.toString(16).padStart(2*t,"0"))}function td(e,t){return tp(e,t).reverse()}function tg(e,t,r){let n;if("string"==typeof t)try{n=tl(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(te(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${e} expected ${r} bytes, got ${i}`);return n}function ty(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];tt(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let th=e=>(e9<<BigInt(e-1))-e7,tm=e=>new Uint8Array(e),tf=e=>Uint8Array.from(e);function tw(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=tm(e),i=tm(e),a=0,s=()=>{n.fill(1),i.fill(0),a=0},o=(...e)=>r(i,n,...e),l=(e=tm())=>{i=o(tf([0]),e),n=o(),0!==e.length&&(i=o(tf([1]),e),n=o())},u=()=>{if(a++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){n=o();let t=n.slice();r.push(t),e+=n.length}return ty(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(u()));)l();return s(),r}}let tb={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||te(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function tC(e,t,r={}){let n=(t,r,n)=>{let i=tb[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let a=e[t];if((!n||void 0!==a)&&!i(a,e))throw Error(`Invalid param ${String(t)}=${a} (${typeof a}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}var tS=Object.freeze({__proto__:null,isBytes:te,abytes:tt,bytesToHex:tn,numberToHexUnpadded:ti,hexToNumber:ta,hexToBytes:tl,bytesToNumberBE:tu,bytesToNumberLE:tc,numberToBytesBE:tp,numberToBytesLE:td,numberToVarBytesBE:function(e){return tl(ti(e))},ensureBytes:tg,concatBytes:ty,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))},bitLen:function(e){let t;for(t=0;e>e6;e>>=e7,t+=1);return t},bitGet:function(e,t){return e>>BigInt(t)&e7},bitSet:function(e,t,r){return e|(r?e7:e6)<<BigInt(t)},bitMask:th,createHmacDrbg:tw,validateObject:tC});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let tx=BigInt(0),tB=BigInt(1),tA=BigInt(2),tE=BigInt(3),tv=BigInt(4),tT=BigInt(5),tI=BigInt(8);function tM(e,t){let r=e%t;return r>=tx?r:t+r}function tR(e,t,r){let n=e;for(;t-- >tx;)n*=n,n%=r;return n}function tP(e,t){if(e===tx||t<=tx)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=tM(e,t),n=t,i=tx,a=tB;for(;r!==tx;){let e=n/r,t=n%r,s=i-a*e;n=r,r=t,i=a,a=s}let s=n;if(s!==tB)throw Error("invert: does not exist");return tM(i,t)}BigInt(9),BigInt(16);let tG=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tO(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function t_(e){if("bigint"!=typeof e)throw Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function tk(e){let t=t_(e);return t+Math.ceil(t/2)}class tU extends eW{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,eU(e);let r=eZ(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return eL(this),this.iHash.update(e),this}digestInto(e){eL(this),ek(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:a,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=a,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let tL=(e,t,r)=>new tU(e,t).update(r).digest();tL.create=(e,t)=>new tU(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let tN=BigInt(0),tq=BigInt(1);function tD(e){return!function(e){let t=tG.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});tC(e,t)}(e.Fp),tC(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...tO(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{bytesToNumberBE:tj,hexToBytes:tQ}=tS,tH={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=tH;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:tj(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=tH,r="string"==typeof e?tQ(e):e;tt(r);let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:a}=tH._parseInt(r.subarray(2)),{d:s,l:o}=tH._parseInt(a);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),a=n.length/2,s=i.length/2,o=r(a),l=r(s);return`30${r(s+a+4)}02${l}${i}02${o}${n}`}},tV=BigInt(0),tF=BigInt(1);BigInt(2);let tz=BigInt(3);BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let t$=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tK=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tZ=BigInt(1),tW=BigInt(2),tX=(e,t)=>(e+t/tW)/t,tJ=function(e,t,r=!1,n={}){if(e<=tx)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:a}=tO(e,t);if(a>2048)throw Error("Field lengths over 2048 bytes are not supported");let s=function(e){if(e%tv===tE){let t=(e+tB)/tv;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%tI===tT){let t=(e-tT)/tI;return function(e,r){let n=e.mul(r,tA),i=e.pow(n,t),a=e.mul(r,i),s=e.mul(e.mul(a,tA),i),o=e.mul(a,e.sub(s,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n;let i=(e-tB)/tA;for(t=e-tB,r=0;t%tA===tx;t/=tA,r++);for(n=tA;n<e&&function(e,t,r){if(r<=tx||t<tx)throw Error("Expected power/modulo > 0");if(r===tB)return tx;let n=tB;for(;t>tx;)t&tB&&(n=n*e%r),e=e*e%r,t>>=tB;return n}(n,i,e)!==e-tB;n++);if(1===r){let t=(e+tB)/tv;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let a=(t+tB)/tA;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(s,a),c=e.pow(s,t);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,tB<<BigInt(o-t-1));l=e.sqr(r),u=e.mul(u,r),c=e.mul(c,l),o=t}return u}}(e)}(e),o=Object.freeze({ORDER:e,BITS:i,BYTES:a,MASK:th(i),ZERO:tx,ONE:tB,create:t=>tM(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return tx<=t&&t<e},is0:e=>e===tx,isOdd:e=>(e&tB)===tB,neg:t=>tM(-t,e),eql:(e,t)=>e===t,sqr:t=>tM(t*t,e),add:(t,r)=>tM(t+r,e),sub:(t,r)=>tM(t-r,e),mul:(t,r)=>tM(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<tx)throw Error("Expected power > 0");if(r===tx)return e.ONE;if(r===tB)return t;let n=e.ONE,i=t;for(;r>tx;)r&tB&&(n=e.mul(n,i)),i=e.sqr(i),r>>=tB;return n})(o,e,t),div:(t,r)=>tM(t*tP(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>tP(t,e),sqrt:n.sqrt||(e=>s(o,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?td(e,a):tp(e,a),fromBytes:e=>{if(e.length!==a)throw Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return r?tc(e):tu(e)}});return Object.freeze(o)}(t$,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),o=BigInt(88),l=e*e*e%t$,u=l*l*e%t$,c=tR(u,t,t$)*u%t$,p=tR(c,t,t$)*u%t$,d=tR(p,tW,t$)*l%t$,g=tR(d,n,t$)*d%t$,y=tR(g,i,t$)*g%t$,h=tR(y,s,t$)*y%t$,m=tR(h,o,t$)*h%t$,f=tR(m,s,t$)*y%t$,w=tR(f,t,t$)*u%t$,b=tR(w,a,t$)*g%t$,C=tR(b,r,t$)*l%t$,S=tR(C,tW,t$);if(!tJ.eql(tJ.sqr(S),e))throw Error("Cannot find square root");return S}}),tY=function(e,t){let r=t=>(function(e){let t=function(e){let t=tD(e);return tC(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,i=r.BYTES+1,a=2*r.BYTES+1;function s(e){return tM(e,n)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:c}=function(e){let t=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(e){let t=tD(e);tC(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let i=t.toAffine();return ty(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1),n=r.fromBytes(t.subarray(0,r.BYTES)),i=r.fromBytes(t.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function a(e){let{a:n,b:i}=t,a=r.sqr(e),s=r.mul(a,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),a(t.Gx)))throw Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&tV<e&&e<t.n}function o(e){if(!s(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:a,n:s}=t;if(n&&"bigint"!=typeof e){if(te(e)&&(e=tn(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:tu(tg("private key",e,i))}catch(t){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return a&&(r=tM(r,s)),o(r),r}let u=new Map;function c(e){if(!(e instanceof p))throw Error("ProjectivePoint expected")}class p{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof p)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?p.ZERO:new p(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(p.fromAffine)}static fromHex(e){let t=p.fromAffine(i(tg("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return p.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),s=a(e);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:n,pz:i}=this,{px:a,py:s,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(a,i)),u=r.eql(r.mul(n,o),r.mul(s,i));return l&&u}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,tz),{px:a,py:s,pz:o}=this,l=r.ZERO,u=r.ZERO,c=r.ZERO,d=r.mul(a,a),g=r.mul(s,s),y=r.mul(o,o),h=r.mul(a,s);return h=r.add(h,h),c=r.mul(a,o),c=r.add(c,c),l=r.mul(e,c),u=r.mul(i,y),u=r.add(l,u),l=r.sub(g,u),u=r.add(g,u),u=r.mul(l,u),l=r.mul(h,l),c=r.mul(i,c),y=r.mul(e,y),h=r.sub(d,y),h=r.mul(e,h),h=r.add(h,c),c=r.add(d,d),d=r.add(c,d),d=r.add(d,y),d=r.mul(d,h),u=r.add(u,d),y=r.mul(s,o),y=r.add(y,y),d=r.mul(y,h),l=r.sub(l,d),c=r.mul(y,g),c=r.add(c,c),c=r.add(c,c),new p(l,u,c)}add(e){c(e);let{px:n,py:i,pz:a}=this,{px:s,py:o,pz:l}=e,u=r.ZERO,d=r.ZERO,g=r.ZERO,y=t.a,h=r.mul(t.b,tz),m=r.mul(n,s),f=r.mul(i,o),w=r.mul(a,l),b=r.add(n,i),C=r.add(s,o);b=r.mul(b,C),C=r.add(m,f),b=r.sub(b,C),C=r.add(n,a);let S=r.add(s,l);return C=r.mul(C,S),S=r.add(m,w),C=r.sub(C,S),S=r.add(i,a),u=r.add(o,l),S=r.mul(S,u),u=r.add(f,w),S=r.sub(S,u),g=r.mul(y,C),u=r.mul(h,w),g=r.add(u,g),u=r.sub(f,g),g=r.add(f,g),d=r.mul(u,g),f=r.add(m,m),f=r.add(f,m),w=r.mul(y,w),C=r.mul(h,C),f=r.add(f,w),w=r.sub(m,w),w=r.mul(y,w),C=r.add(C,w),m=r.mul(f,C),d=r.add(d,m),m=r.mul(S,C),u=r.mul(b,u),u=r.sub(u,m),m=r.mul(b,f),g=r.mul(S,g),g=r.add(g,m),new p(u,d,g)}subtract(e){return this.add(e.negate())}is0(){return this.equals(p.ZERO)}wNAF(e){return g.wNAFCached(this,u,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(p.fromAffine)})}multiplyUnsafe(e){let n=p.ZERO;if(e===tV)return n;if(o(e),e===tF)return this;let{endo:i}=t;if(!i)return g.unsafeLadder(this,e);let{k1neg:a,k1:s,k2neg:l,k2:u}=i.splitScalar(e),c=n,d=n,y=this;for(;s>tV||u>tV;)s&tF&&(c=c.add(y)),u&tF&&(d=d.add(y)),y=y.double(),s>>=tF,u>>=tF;return a&&(c=c.negate()),l&&(d=d.negate()),d=new p(r.mul(d.px,i.beta),d.py,d.pz),c.add(d)}multiply(e){let n,i;o(e);let{endo:a}=t;if(a){let{k1neg:t,k1:s,k2neg:o,k2:l}=a.splitScalar(e),{p:u,f:c}=this.wNAF(s),{p:d,f:y}=this.wNAF(l);u=g.constTimeNegate(t,u),d=g.constTimeNegate(o,d),d=new p(r.mul(d.px,a.beta),d.py,d.pz),n=u.add(d),i=c.add(y)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return p.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=p.BASE,i=(e,t)=>t!==tV&&t!==tF&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),a=i(this,t).add(i(e,r));return a.is0()?void 0:a}toAffine(e){let{px:t,py:n,pz:i}=this,a=this.is0();null==e&&(e=a?r.ONE:r.inv(i));let s=r.mul(t,e),o=r.mul(n,e),l=r.mul(i,e);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:s,y:o}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===tF)return!0;if(r)return r(p,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===tF?this:r?r(p,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(p,this,e)}toHex(e=!0){return tn(this.toRawBytes(e))}}p.BASE=new p(t.Gx,t.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);let d=t.nBitLength,g=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>tN;)r&tq&&(n=n.add(i)),i=i.double(),r>>=tq;return n},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),a=[],s=e,o=s;for(let e=0;e<r;e++){o=s,a.push(o);for(let e=1;e<i;e++)o=o.add(s),a.push(o);s=o.double()}return a},wNAF(t,i,a){let{windows:s,windowSize:o}=n(t),l=e.ZERO,u=e.BASE,c=BigInt(2**t-1),p=2**t,d=BigInt(t);for(let e=0;e<s;e++){let t=e*o,n=Number(a&c);a>>=d,n>o&&(n-=p,a+=tq);let s=t+Math.abs(n)-1,g=e%2!=0,y=n<0;0===n?u=u.add(r(g,i[t])):l=l.add(r(y,i[s]))}return{p:l,f:u}},wNAFCached(e,t,r,n){let i=e._WINDOW_SIZE||1,a=t.get(e);return a||(a=this.precomputeWindow(e,i),1!==i&&t.set(e,n(a))),this.wNAF(i,a,r)}}}(p,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:s}}({...t,toBytes(e,t,n){let i=t.toAffine(),a=r.toBytes(i.x);return n?ty(Uint8Array.from([t.hasEvenY()?2:3]),a):ty(Uint8Array.from([4]),a,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],s=e.subarray(1);if(t===i&&(2===n||3===n)){let e;let t=tu(s);if(!(tV<t&&t<r.ORDER))throw Error("Point is not on curve");let i=u(t);try{e=r.sqrt(i)}catch(t){let e=t instanceof Error?": "+t.message:"";throw Error("Point is not on curve"+e)}let a=(e&tF)===tF;return(1&n)==1!==a&&(e=r.neg(e)),{x:t,y:e}}if(t===a&&4===n){let e=r.fromBytes(s.subarray(0,r.BYTES)),t=r.fromBytes(s.subarray(r.BYTES,2*r.BYTES));return{x:e,y:t}}throw Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}}),p=e=>tn(tp(e,t.nByteLength));function d(e){let t=n>>tF;return e>t}let g=(e,t,r)=>tu(e.slice(t,r));class y{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return e=tg("compactSignature",e,2*r),new y(g(e,0,r),g(e,r,2*r))}static fromDER(e){let{r:t,s:r}=tH.toSig(tg("DER",e));return new y(t,r)}assertValidity(){if(!c(this.r))throw Error("r must be 0 < r < CURVE.n");if(!c(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){let{r:i,s:a,recovery:l}=this,u=f(tg("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let c=2===l||3===l?i+t.n:i;if(c>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",g=o.fromHex(d+p(c)),y=tP(c,n),h=s(-u*y),m=s(a*y),w=o.BASE.multiplyAndAddUnsafe(g,h,m);if(!w)throw Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return tl(this.toDERHex())}toDERHex(){return tH.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tl(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}function h(e){let t=te(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===a:r?n===2*i||n===2*a:e instanceof o}let m=t.bits2int||function(e){let r=tu(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},f=t.bits2int_modN||function(e){return s(m(e))},w=th(t.nBitLength);function b(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(tV<=e&&e<w))throw Error(`bigint expected < 2^${t.nBitLength}`);return tp(e,t.nByteLength)}let C={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(h(e))throw Error("first arg must be private key");if(!h(t))throw Error("second arg must be public key");let n=o.fromHex(t);return n.multiply(l(e)).toRawBytes(r)},sign:function(e,i,a=C){let{seed:u,k2sig:p}=function(e,i,a=C){if(["recovered","canonical"].some(e=>e in a))throw Error("sign() legacy options not supported");let{hash:u,randomBytes:p}=t,{lowS:g,prehash:h,extraEntropy:w}=a;null==g&&(g=!0),e=tg("msgHash",e),h&&(e=tg("prehashed msgHash",u(e)));let S=f(e),x=l(i),B=[b(x),b(S)];if(null!=w&&!1!==w){let e=!0===w?p(r.BYTES):w;B.push(tg("extraEntropy",e))}let A=ty(...B);return{seed:A,k2sig:function(e){let t=m(e);if(!c(t))return;let r=tP(t,n),i=o.BASE.multiply(t).toAffine(),a=s(i.x);if(a===tV)return;let l=s(r*s(S+a*x));if(l===tV)return;let u=(i.x===a?0:2)|Number(i.y&tF),p=l;return g&&d(l)&&(p=d(l)?s(-l):l,u^=1),new y(a,p,u)}}}(e,i,a),g=tw(t.hash.outputLen,t.nByteLength,t.hmac);return g(u,p)},verify:function(e,r,i,a=S){let l,u;if(r=tg("msgHash",r),i=tg("publicKey",i),"strict"in a)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:p}=a;try{if("string"==typeof e||te(e))try{u=y.fromDER(e)}catch(t){if(!(t instanceof tH.Err))throw t;u=y.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;u=new y(t,r)}else throw Error("PARSE");l=o.fromHex(i)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&u.hasHighS())return!1;p&&(r=t.hash(r));let{r:d,s:g}=u,h=f(r),m=tP(g,n),w=s(h*m),b=s(d*m),C=o.BASE.multiplyAndAddUnsafe(l,w,b)?.toAffine();if(!C)return!1;let x=s(C.x);return x===d},ProjectivePoint:o,Signature:y,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=tk(t.n);return function(e,t,r=!1){let n=e.length,i=t_(t),a=tk(t);if(n<16||n<a||n>1024)throw Error(`expected ${a}-1024 bytes of input, got ${n}`);let s=r?tu(e):tc(e),o=tM(s,t-tB)+tB;return r?td(o,i):tp(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=o.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>tL(t,e,function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];ek(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:eJ});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:tJ,n:tK,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-tZ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),a=tX(t*e,tK),s=tX(-r*e,tK),o=tM(e-a*t-s*n,tK),l=tM(-a*r-s*t,tK),u=o>i,c=l>i;if(u&&(o=tK-o),c&&(l=tK-l),o>i||l>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:o,k2neg:c,k2:l}}}},e5);BigInt(0),tY.ProjectivePoint;let t0=eq.bool,t1=eq.bytes;(()=>{let t="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,r="function"==typeof e.require&&e.require.bind(e);return r&&!t?r("crypto"):void 0})(),tY.ProjectivePoint,tY.CURVE.n;let t2=e=>{let t=(0,s.lE)(e),r=function(e,t=!0,r){t1(e,32),t0(t);let n=tY.getPublicKey(e,t);return function(e=e=>new Uint8Array(e),t,r){return"function"==typeof e&&(e=e(t)),t1(e,t),r&&e.set(r),e}(void 0,t?33:65,n)}(t),n=(0,s.Dv)((0,s.lE)(r)),i=t4(n);return i},t3=({messageHash:e,signature:t})=>{let r=(0,Z.LO)(e,t);return(0,Z.VW)(r,!0)},t4=e=>{let t=ea.PubKey.fromPartial({key:(0,s.lE)(e)});return{typeUrl:"/cosmos.crypto.eth.ethsecp256k1.PubKey",value:ea.PubKey.encode(t).finish()}},t8=e=>w.TypedDataUtils.eip712Hash(JSON.parse(e),w.SignTypedDataVersion.V4),t5=async(e,t)=>{let r=await window.ethereum?.request({method:"eth_signTypedData_v4",params:[e,t]});return r},t6=(e,t="BNB")=>{if(!e.gasInfo)throw Error("gasInfo not found");let r=BigInt(e.gasInfo?.gasUsed.toNumber()),n=e.gasInfo?.minGasPrice.replace(t,""),i=r*BigInt(n);return{gasLimit:r,gasPrice:n,gasFee:(0,eg.dF)(String(i))}},t7=class{constructor(e){this.rpcUrl=e,this.rpcClient=null,this.txQueryClient=null,this.rpcUrl=e}async getRpcClient(){return this.rpcClient||(this.rpcClient=await re(this.rpcUrl)),this.rpcClient}async getQueryClient(){if(!this.txQueryClient){let[e]=await t9(this.rpcUrl);this.txQueryClient=e}return this.txQueryClient}async getAuthQueryClient(){let e=await this.getRpcClient();return new S.QueryClientImpl(e)}async getBankQueryClient(){let e=await this.getRpcClient();return new x.QueryClientImpl(e)}async getPaymentQueryClient(){let e=await this.getRpcClient();return new P.QueryClientImpl(e)}async getSpQueryClient(){let e=await this.getRpcClient();return new G.QueryClientImpl(e)}async getChallengeQueryClient(){let e=await this.getRpcClient();return new R.QueryClientImpl(e)}async getCrosschainQueryClient(){let e=await this.getRpcClient();return new B.QueryClientImpl(e)}async getOracleQueryClient(){let e=await this.getRpcClient();return new T.QueryClientImpl(e)}async getBridgeQueryClient(){let e=await this.getRpcClient();return new M.QueryClientImpl(e)}async getFeeGrantQueryClient(){let e=await this.getRpcClient();return new E.QueryClientImpl(e)}async getStorageQueryClient(){let e=await this.getRpcClient();return new O.QueryClientImpl(e)}async getMsgClient(){let e=await this.getRpcClient();return new A.MsgClientImpl(e)}async getGashubClient(){let e=await this.getRpcClient();return new v.QueryClientImpl(e)}async getVirtualGroupClient(){let e=await this.getRpcClient();return new _.QueryClientImpl(e)}async getStakingClient(){let e=await this.getRpcClient();return new I.QueryClientImpl(e)}};t7=ex([(0,n.b2)(),eB(0,(0,n.f3)("RPC_URL")),eA("design:paramtypes",[String])],t7);let t9=async e=>{let t=await U.Tendermint37Client.connect(e);return[k.QueryClient.withExtensions(t,k.setupAuthExtension,k.setupAuthzExtension,k.setupBankExtension,k.setupDistributionExtension,k.setupFeegrantExtension,k.setupGovExtension,k.setupIbcExtension,k.setupMintExtension,k.setupSlashingExtension,k.setupStakingExtension,k.setupTxExtension),t]},re=async e=>{let[,t]=await t9(e),r=(0,k.createProtobufRpcClient)(new k.QueryClient(t));return r},rt="/greenfield.storage.MsgMigrateBucket",rr="/cosmos.feegrant.v1beta1.BasicAllowance",rn="/cosmos.feegrant.v1beta1.AllowedMsgAllowance",ri="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",ra="POST",rs="SP not available",ro="BNB",rl=class{constructor(e,t){this.account=n.nC.resolve(rd),this.rpcQueryClient=n.nC.resolve(t7),this.rpcUrl=e,this.chainId=t}async tx(e,t,r,n,i){let a=this.getBodyBytes([{typeUrl:e,msgBytes:i}]),s=await this.multiTx([{metaTxInfo:{typeUrl:e,address:t,MsgSDKTypeEIP712:r,MsgSDK:n,msgBytes:i,bodyBytes:a}}]);return{simulate:s.simulate,broadcast:s.broadcast,metaTxInfo:{typeUrl:e,address:t,MsgSDKTypeEIP712:r,MsgSDK:n,msgBytes:i,bodyBytes:a}}}async txRaw({address:e,txRawHex:t,eip712MsgType:r,msgData:n}){let i=await this.account.getAccount(e),a=(0,s.lE)(t),o=ef.TxRaw.decode(a);return{simulate:async e=>await this.simulateRawTx(o.bodyBytes,i,e),broadcast:async e=>{let{denom:t,gasLimit:a,gasPrice:l,payer:u,granter:c,privateKey:p,signTypedDataCallback:d=t5}=e,g=eM(String(BigInt(a)*BigInt(l)),t,String(a),u,c),y=eI(r),h=eG(n),m=eO(n,h),f=eT(i.accountNumber.toString(),i.sequence.toString(),this.chainId,"",g,m,"0"),w=ev(y,this.chainId,f),{pubKey:b,signature:C}=p?this.getSignByPriKey(w,p):await this.getSignByWallet(w,i.address,d),S=this.getAuthInfoBytes({denom:t,sequence:i.sequence+"",gasLimit:a,gasPrice:l,pubKey:b,granter:c,payer:u}),x=ef.TxRaw.fromPartial({bodyBytes:o.bodyBytes,authInfoBytes:S,signatures:[(0,s.lE)(C)]}),B=ef.TxRaw.encode(x).finish();return await this.broadcastRawTx(B)}}}getBodyBytes(e){let t=e.map(e=>eE(e.typeUrl,e.msgBytes)),r=ef.TxBody.fromPartial({messages:t}),n=ef.TxBody.encode(r).finish();return n}getSignByPriKey(e,t){rF(t);let r=t2(t),n=(0,w.signTypedData)({data:e,version:w.SignTypedDataVersion.V4,privateKey:eS.from((0,s.lE)(t))});return{pubKey:r,signature:n}}async getSignByWallet(e,t,r){let n=await r(t,JSON.stringify(e)),i=t8(JSON.stringify(e)),a=t3({signature:n,messageHash:i}),s=t4(a);return{pubKey:s,signature:n}}getAuthInfoBytes(e){let{pubKey:t,denom:r=ro,sequence:n,gasLimit:i,gasPrice:a,granter:s,payer:o}=e;if(!t)throw Error("pubKey is required");let l=[{denom:r,amount:String(BigInt(i)*BigInt(a))}],u=(0,ew.makeAuthInfoBytes)([{pubkey:t,sequence:Number(n)}],l,i,s,o,712);return u}async simulateRawTx(e,t,r){let n=await this.rpcQueryClient.getRpcClient(),i=new em.ServiceClientImpl(n),{denom:a}=r,s=this.getAuthInfoBytes({sequence:t.sequence+"",denom:a,gasLimit:0,gasPrice:"0",pubKey:t4("0x000000000000000000000000000000000000000000000000000000000000000000"),granter:"",payer:""}),o=ef.Tx.fromPartial({authInfo:ef.AuthInfo.decode(s),body:ef.TxBody.decode(e),signatures:[Uint8Array.from([])]}),l=em.SimulateRequest.fromPartial({txBytes:ef.Tx.encode(o).finish()}),u=await i.Simulate(l);return t6(u,a)}async broadcastRawTx(e){let t=await U.Tendermint37Client.connect(this.rpcUrl),r=await k.StargateClient.create(t);return await r.broadcastTx(e)}async multiTx(e){let t=e.map(e=>e.metaTxInfo),r=await this.account.getAccount(t[0].address),n=this.getBodyBytes(t);return{simulate:async e=>await this.simulateRawTx(n,r,e),broadcast:async e=>{let{denom:i,gasLimit:a,gasPrice:o,payer:l,granter:u,privateKey:c,signTypedDataCallback:p=t5}=e,d=eR(t.map(e=>e.MsgSDKTypeEIP712)),g=eM(String(BigInt(a)*BigInt(o)),i,String(a),l,u),y=eI(d),h=eP(t),m=eT(r.accountNumber.toString(),r.sequence.toString(),this.chainId,"",g,h,"0"),f=ev(y,this.chainId,m),{pubKey:w,signature:b}=c?this.getSignByPriKey(f,c):await this.getSignByWallet(f,r.address,p),C=this.getAuthInfoBytes({denom:i,sequence:r.sequence+"",gasLimit:a,gasPrice:o,pubKey:w,granter:u,payer:l}),S=ef.TxRaw.fromPartial({bodyBytes:n,authInfoBytes:C,signatures:[(0,s.lE)(b)]}),x=ef.TxRaw.encode(S).finish();return await this.broadcastRawTx(x)}}}};rl=ex([(0,n.b2)(),eB(0,(0,n.f3)("RPC_URL")),eB(1,(0,n.f3)("CHAIN_ID")),eA("design:paramtypes",[String,String])],rl);let ru={Msg1:[{name:"type",type:"string"},{name:"inputs",type:"TypeMsg1Inputs[]"},{name:"outputs",type:"TypeMsg1Outputs[]"}],TypeMsg1Inputs:[{name:"address",type:"string"},{name:"coins",type:"TypeMsg1InputsCoins[]"}],TypeMsg1InputsCoins:[{name:"denom",type:"string"},{name:"amount",type:"string"}],TypeMsg1Outputs:[{name:"address",type:"string"},{name:"coins",type:"TypeMsg1OutputsCoins[]"}],TypeMsg1OutputsCoins:[{name:"denom",type:"string"},{name:"amount",type:"string"}]},rc={Msg1:[{name:"type",type:"string"},{name:"from_address",type:"string"},{name:"to_address",type:"string"},{name:"amount",type:"TypeMsg1Amount[]"}],TypeMsg1Amount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]},rp={Msg1:[{name:"type",type:"string"},{name:"creator",type:"string"}]},rd=class{constructor(e){this.txClient=e,this.queryClient=n.nC.resolve(t7)}async multiTransfer(e,t){return await this.txClient.tx("/cosmos.bank.v1beta1.MsgMultiSend",e,ru,eC.MsgMultiSend.toSDK(t),eC.MsgMultiSend.encode(t).finish())}async createPaymentAccount(e){return await this.txClient.tx("/greenfield.payment.MsgCreatePaymentAccount",e.creator,rp,W.MsgCreatePaymentAccount.toSDK(e),W.MsgCreatePaymentAccount.encode(e).finish())}async getPaymentAccountsByOwner(e){let t=await this.queryClient.getPaymentQueryClient();return await t.PaymentAccountsByOwner({owner:e})}async getModuleAccountByName(e){let t=await this.queryClient.getAuthQueryClient();return t.ModuleAccountByName({name:e})}async getModuleAccounts(){let e=await this.queryClient.getAuthQueryClient();return await e.ModuleAccounts()}async getAccountBalance(e){let t=await this.queryClient.getBankQueryClient();return await t.Balance(e)}async getAccount(e){let t=await this.queryClient.getQueryClient(),r=await t.auth.account(e);return r?eb.BaseAccount.toJSON(eb.BaseAccount.decode(r.value)):eb.BaseAccount.fromJSON({})}async transfer(e){return await this.txClient.tx("/cosmos.bank.v1beta1.MsgSend",e.fromAddress,rc,eC.MsgSend.toSDK(e),eC.MsgSend.encode(e).finish())}};rd=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],rd);let rg=class{constructor(){this.rpcQueryClient=n.nC.resolve(t7)}async getNodeInfo(){let e=await this.rpcQueryClient.getRpcClient(),t=new b.ServiceClientImpl(e);return await t.GetNodeInfo()}async getLatestBlock(){let e=await this.rpcQueryClient.getRpcClient(),t=new b.ServiceClientImpl(e);return await t.GetLatestBlock()}async getLatestBlockHeight(){let e=await this.getLatestBlock(),t=e.sdkBlock?.header?.height;return t?t.toNumber():0}async getSyncing(){let e=await this.rpcQueryClient.getRpcClient(),t=new b.ServiceClientImpl(e),r=await t.GetSyncing();return r.syncing}async getBlockByHeight(e){let t=await this.rpcQueryClient.getRpcClient(),r=new b.ServiceClientImpl(t);return await r.GetBlockByHeight({height:C.Z.fromInt(e)})}async GetLatestValidatorSet(e){let t=await this.rpcQueryClient.getRpcClient(),r=new b.ServiceClientImpl(t),n=await r.GetLatestValidatorSet(e);return n.blockHeight.toNumber()}};rg=ex([(0,n.b2)()],rg);let ry={Msg1:[{name:"type",type:"string"},{name:"from",type:"string"},{name:"to",type:"string"},{name:"amount",type:"TypeMsg1Amount"}],TypeMsg1Amount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]},rh={Msg1:[{name:"type",type:"string"},{name:"submitter",type:"string"},{name:"challenge_id",type:"uint64"},{name:"object_id",type:"string"},{name:"sp_operator_address",type:"string"},{name:"vote_result",type:"string"},{name:"challenger_address",type:"string"}]},rm={Msg1:[{name:"type",type:"string"},{name:"challenger",type:"string"},{name:"sp_operator_address",type:"string"},{name:"bucket_name",type:"string"},{name:"object_name",type:"string"},{name:"segment_index",type:"uint32"},{name:"random_index",type:"bool"}]},rf={Msg1:[{name:"type",type:"string"},{name:"creator",type:"string"},{name:"to",type:"string"},{name:"amount",type:"string"}]},rw={Msg1:[{name:"type",type:"string"},{name:"owner",type:"string"},{name:"addr",type:"string"}]},rb={Msg1:[{name:"type",type:"string"},{name:"creator",type:"string"},{name:"from",type:"string"},{name:"amount",type:"string"}]},rC={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"bucket_name",type:"string"},{name:"object_name",type:"string"}]},rS={Msg1:[{name:"bucket_name",type:"string"},{name:"charged_read_quota",type:"uint64"},{name:"creator",type:"string"},{name:"payment_address",type:"string"},{name:"primary_sp_address",type:"string"},{name:"primary_sp_approval",type:"TypeMsg1PrimarySpApproval"},{name:"type",type:"string"},{name:"visibility",type:"string"}],TypeMsg1PrimarySpApproval:[{name:"expired_height",type:"uint64"},{name:"global_virtual_group_family_id",type:"uint32"}]},rx={Msg1:[{name:"creator",type:"string"},{name:"extra",type:"string"},{name:"group_name",type:"string"},{name:"type",type:"string"}]},rB={Msg1:[{name:"bucket_name",type:"string"},{name:"content_type",type:"string"},{name:"creator",type:"string"},{name:"expect_checksums",type:"bytes[]"},{name:"object_name",type:"string"},{name:"payload_size",type:"uint64"},{name:"primary_sp_approval",type:"TypeMsg1PrimarySpApproval"},{name:"redundancy_type",type:"string"},{name:"type",type:"string"},{name:"visibility",type:"string"}],TypeMsg1PrimarySpApproval:[{name:"expired_height",type:"uint64"},{name:"global_virtual_group_family_id",type:"uint32"}]},rA={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"bucket_name",type:"string"}]},rE={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"group_name",type:"string"}]},rv={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"bucket_name",type:"string"},{name:"object_name",type:"string"}]},rT={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"resource",type:"string"},{name:"principal",type:"TypeMsg1Principal"}],TypeMsg1Principal:[{name:"type",type:"string"},{name:"value",type:"string"}]},rI={Msg1:[{name:"type",type:"string"},{name:"member",type:"string"},{name:"group_owner",type:"string"},{name:"group_name",type:"string"}]},rM={Msg1:[{name:"bucket_name",type:"string"},{name:"dst_primary_sp_approval",type:"TypeMsg1DstPrimarySpApproval"},{name:"dst_primary_sp_id",type:"uint32"},{name:"operator",type:"string"},{name:"type",type:"string"}],TypeMsg1DstPrimarySpApproval:[{name:"expired_height",type:"uint64"},{name:"global_virtual_group_family_id",type:"uint32"},{name:"sig",type:"bytes"}]},rR={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"id",type:"string"},{name:"bucket_name",type:"string"}]},rP={Msg1:[{name:"dest_chain_id",type:"uint32"},{name:"group_name",type:"string"},{name:"id",type:"string"},{name:"operator",type:"string"},{name:"type",type:"string"}]},rG={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"id",type:"string"},{name:"bucket_name",type:"string"},{name:"object_name",type:"string"}]},rO=e=>{let t=u()(r_);return 0!==e.length&&t.TypeMsg1Statements.push({name:"resources",type:"string[]"}),t},r_={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"principal",type:"TypeMsg1Principal"},{name:"resource",type:"string"},{name:"statements",type:"TypeMsg1Statements[]"},{name:"expiration_time",type:"string"}],TypeMsg1Principal:[{name:"type",type:"string"},{name:"value",type:"string"}],TypeMsg1Statements:[{name:"actions",type:"string[]"},{name:"effect",type:"string"},{name:"expiration_time",type:"string"}]},rk=e=>{let t=u()(rU);return e?(t.Msg1.push({name:"tags",type:"TypeMsg1Tags"}),t.TypeMsg1Tags=[{name:"tags",type:"string[]"}]):(t.Msg1.push({name:"tags",type:"TypeMsg1Tags"}),t.TypeMsg1Tags=[{name:"tags",type:"TypeMsg1TagsTags[]"}],t.TypeMsg1TagsTags=[{name:"key",type:"string"},{name:"value",type:"string"}]),t},rU={Msg1:[{name:"operator",type:"string"},{name:"resource",type:"string"},{name:"type",type:"string"}]},rL={Msg1:[{name:"bucket_name",type:"string"},{name:"operator",type:"string"},{name:"type",type:"string"}]},rN={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"bucket_name",type:"string"},{name:"charged_read_quota",type:"TypeMsg1ChargedReadQuota"},{name:"payment_address",type:"string"},{name:"visibility",type:"string"}],TypeMsg1ChargedReadQuota:[{name:"value",type:"uint64"}]},rq={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"group_owner",type:"string"},{name:"group_name",type:"string"},{name:"extra",type:"string"}]},rD=({membersToAdd:e,membersToDelete:t})=>{let r=u()(rj);return e.length>0&&(r.Msg1.push({name:"members_to_add",type:"TypeMsg1MembersToAdd[]"}),r.TypeMsg1MembersToAdd=[{name:"expiration_time",type:"string"},{name:"member",type:"string"}]),t.length>0&&r.Msg1.push({name:"members_to_delete",type:"string[]"}),r},rj={Msg1:[{name:"group_name",type:"string"},{name:"group_owner",type:"string"},{name:"operator",type:"string"},{name:"type",type:"string"}]},rQ={Msg1:[{name:"type",type:"string"},{name:"operator",type:"string"},{name:"bucket_name",type:"string"},{name:"object_name",type:"string"},{name:"visibility",type:"string"}]},rH={Msg1:[{name:"bucket_name",type:"string"},{name:"bucket_owner",type:"string"},{name:"flow_rate_limit",type:"string"},{name:"operator",type:"string"},{name:"payment_address",type:"string"},{name:"type",type:"string"}]},rV=(e,t)=>{if(!e)throw Error(t)},rF=e=>{if(!e.startsWith("0x"))throw Error("private key should start with 0x")},rz=e=>{if(!e)throw Error("authType is required");"ECDSA"===e.type&&rF(e.privateKey),"EDDSA"===e.type&&(rV(e.address,"address param is required"),rV(e.seed,"seed param is required"),rV(e.domain,"domain param is required"))};function r$(e){return"content"in e}function rK(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function rZ(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let rW="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function rX(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rJ(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),rK(e),e}class rY{clone(){return this._cloneInto()}}class r0 extends rY{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=rX(this.buffer)}update(e){rZ(this);let{view:t,buffer:r,blockLen:n}=this;e=rJ(e);let i=e.length;for(let a=0;a<i;){let s=Math.min(n-this.pos,i-a);if(s===n){let t=rX(e);for(;n<=i-a;a+=n)this.process(t,a);continue}r.set(e.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){rZ(this),function(e,t){rK(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let e=a;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),l=n?4:0,u=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+u,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=rX(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(r),e}}let r1=BigInt(4294967296-1),r2=BigInt(32);function r3(e,t=!1){return t?{h:Number(e&r1),l:Number(e>>r2&r1)}:{h:0|Number(e>>r2&r1),l:0|Number(e&r1)}}let r4={fromBig:r3,split:function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:a,l:s}=r3(e[i],t);[r[i],n[i]]=[a,s]}return[r,n]},toBig:(e,t)=>BigInt(e>>>0)<<r2|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/4294967296|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0,add5H:(e,t,r,n,i,a)=>t+r+n+i+a+(e/4294967296|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[r8,r5]=r4.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),r6=new Uint32Array(80),r7=new Uint32Array(80);class r9 extends r0{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:a,Dh:s,Dl:o,Eh:l,El:u,Fh:c,Fl:p,Gh:d,Gl:g,Hh:y,Hl:h}=this;return[e,t,r,n,i,a,s,o,l,u,c,p,d,g,y,h]}set(e,t,r,n,i,a,s,o,l,u,c,p,d,g,y,h){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|a,this.Dh=0|s,this.Dl=0|o,this.Eh=0|l,this.El=0|u,this.Fh=0|c,this.Fl=0|p,this.Gh=0|d,this.Gl=0|g,this.Hh=0|y,this.Hl=0|h}process(e,t){for(let r=0;r<16;r++,t+=4)r6[r]=e.getUint32(t),r7[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|r6[e-15],r=0|r7[e-15],n=r4.rotrSH(t,r,1)^r4.rotrSH(t,r,8)^r4.shrSH(t,r,7),i=r4.rotrSL(t,r,1)^r4.rotrSL(t,r,8)^r4.shrSL(t,r,7),a=0|r6[e-2],s=0|r7[e-2],o=r4.rotrSH(a,s,19)^r4.rotrBH(a,s,61)^r4.shrSH(a,s,6),l=r4.rotrSL(a,s,19)^r4.rotrBL(a,s,61)^r4.shrSL(a,s,6),u=r4.add4L(i,l,r7[e-7],r7[e-16]),c=r4.add4H(u,n,o,r6[e-7],r6[e-16]);r6[e]=0|c,r7[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:a,Ch:s,Cl:o,Dh:l,Dl:u,Eh:c,El:p,Fh:d,Fl:g,Gh:y,Gl:h,Hh:m,Hl:f}=this;for(let e=0;e<80;e++){let t=r4.rotrSH(c,p,14)^r4.rotrSH(c,p,18)^r4.rotrBH(c,p,41),w=r4.rotrSL(c,p,14)^r4.rotrSL(c,p,18)^r4.rotrBL(c,p,41),b=c&d^~c&y,C=p&g^~p&h,S=r4.add5L(f,w,C,r5[e],r7[e]),x=r4.add5H(S,m,t,b,r8[e],r6[e]),B=0|S,A=r4.rotrSH(r,n,28)^r4.rotrBH(r,n,34)^r4.rotrBH(r,n,39),E=r4.rotrSL(r,n,28)^r4.rotrBL(r,n,34)^r4.rotrBL(r,n,39),v=r&i^r&s^i&s,T=n&a^n&o^a&o;m=0|y,f=0|h,y=0|d,h=0|g,d=0|c,g=0|p,({h:c,l:p}=r4.add(0|l,0|u,0|x,0|B)),l=0|s,u=0|o,s=0|i,o=0|a,i=0|r,a=0|n;let I=r4.add3L(B,E,T);r=r4.add3H(I,x,A,v),n=0|I}({h:r,l:n}=r4.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:a}=r4.add(0|this.Bh,0|this.Bl,0|i,0|a)),({h:s,l:o}=r4.add(0|this.Ch,0|this.Cl,0|s,0|o)),({h:l,l:u}=r4.add(0|this.Dh,0|this.Dl,0|l,0|u)),({h:c,l:p}=r4.add(0|this.Eh,0|this.El,0|c,0|p)),({h:d,l:g}=r4.add(0|this.Fh,0|this.Fl,0|d,0|g)),({h:y,l:h}=r4.add(0|this.Gh,0|this.Gl,0|y,0|h)),({h:m,l:f}=r4.add(0|this.Hh,0|this.Hl,0|m,0|f)),this.set(r,n,i,a,s,o,l,u,c,p,d,g,y,h,m,f)}roundClean(){r6.fill(0),r7.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let ne=function(e){let t=t=>e().update(rJ(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new r9),nt=BigInt(0),nr=BigInt(1),nn=BigInt(2);function ni(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function na(e){if(!ni(e))throw Error("Uint8Array expected")}function ns(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let no=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nl(e){na(e);let t="";for(let r=0;r<e.length;r++)t+=no[e[r]];return t}function nu(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?nt:BigInt("0x"+e)}let nc={_0:48,_9:57,A:65,F:70,a:97,f:102};function np(e){return e>=nc._0&&e<=nc._9?e-nc._0:e>=nc.A&&e<=nc.F?e-(nc.A-10):e>=nc.a&&e<=nc.f?e-(nc.a-10):void 0}function nd(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=np(e.charCodeAt(i)),a=np(e.charCodeAt(i+1));if(void 0===r||void 0===a){let t=e[i]+e[i+1];throw Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+a}return n}function ng(e){return na(e),nu(nl(Uint8Array.from(e).reverse()))}function ny(e,t){return nd(e.toString(16).padStart(2*t,"0"))}function nh(e,t){return ny(e,t).reverse()}function nm(e,t,r){let n;if("string"==typeof t)try{n=nd(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(ni(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function nf(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];na(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let nw=e=>"bigint"==typeof e&&nt<=e;function nb(e,t,r,n){if(!(nw(t)&&nw(r)&&nw(n))||!(r<=t)||!(t<n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}let nC=e=>(nn<<BigInt(e-1))-nr,nS={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||ni(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function nx(e,t,r={}){let n=(t,r,n)=>{let i=nS[r];if("function"!=typeof i)throw Error("invalid validator function");let a=e[t];if((!n||void 0!==a)&&!i(a,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+a)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function nB(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let a=e(r,...n);return t.set(r,a),a}}let nA=BigInt(0),nE=BigInt(1),nv=BigInt(2),nT=BigInt(3),nI=BigInt(4),nM=BigInt(5),nR=BigInt(8);function nP(e,t){let r=e%t;return r>=nA?r:t+r}function nG(e,t,r){let n=e;for(;t-- >nA;)n*=n,n%=r;return n}function nO(e,t){if(e===nA)throw Error("invert: expected non-zero number");if(t<=nA)throw Error("invert: expected positive modulus, got "+t);let r=nP(e,t),n=t,i=nA,a=nE;for(;r!==nA;){let e=n/r,t=n%r,s=i-a*e;n=r,r=t,i=a,a=s}let s=n;if(s!==nE)throw Error("invert: does not exist");return nP(i,t)}let n_=(e,t)=>(nP(e,t)&nE)===nE,nk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nU(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function nL(e,t,r=!1,n={}){let i;if(e<=nA)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:a,nByteLength:s}=nU(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,isLE:r,BITS:a,BYTES:s,MASK:nC(a),ZERO:nA,ONE:nE,create:t=>nP(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return nA<=t&&t<e},is0:e=>e===nA,isOdd:e=>(e&nE)===nE,neg:t=>nP(-t,e),eql:(e,t)=>e===t,sqr:t=>nP(t*t,e),add:(t,r)=>nP(t+r,e),sub:(t,r)=>nP(t-r,e),mul:(t,r)=>nP(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<nA)throw Error("invalid exponent, negatives unsupported");if(r===nA)return e.ONE;if(r===nE)return t;let n=e.ONE,i=t;for(;r>nA;)r&nE&&(n=e.mul(n,i)),i=e.sqr(i),r>>=nE;return n})(o,e,t),div:(t,r)=>nP(t*nO(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>nO(t,e),sqrt:n.sqrt||(t=>(i||(i=function(e){if(e%nI===nT){let t=(e+nE)/nI;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%nR===nM){let t=(e-nM)/nR;return function(e,r){let n=e.mul(r,nv),i=e.pow(n,t),a=e.mul(r,i),s=e.mul(e.mul(a,nv),i),o=e.mul(a,e.sub(s,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n;let i=(e-nE)/nv;for(t=e-nE,r=0;t%nv===nA;t/=nv,r++);for(n=nv;n<e&&function(e,t,r){if(t<nA)throw Error("invalid exponent, negatives unsupported");if(r<=nA)throw Error("invalid modulus");if(r===nE)return nA;let n=nE;for(;t>nA;)t&nE&&(n=n*e%r),e=e*e%r,t>>=nE;return n}(n,i,e)!==e-nE;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+nE)/nI;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let a=(t+nE)/nv;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(s,a),c=e.pow(s,t);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,nE<<BigInt(o-t-1));l=e.sqr(r),u=e.mul(u,r),c=e.mul(c,l),o=t}return u}}(e)}(e)),i(o,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?nh(e,s):ny(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?ng(e):nu(nl(e))}});return Object.freeze(o)}let nN=BigInt(0),nq=BigInt(1);function nD(e,t){let r=t.negate();return e?r:t}function nj(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function nQ(e,t){nj(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}let nH=new WeakMap,nV=new WeakMap;function nF(e){return nV.get(e)||1}let nz=BigInt(0),n$=BigInt(1),nK=BigInt(2),nZ=BigInt(8),nW={zip215:!0};BigInt(0),BigInt(1);let nX=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),nJ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);let nY=BigInt(1),n0=BigInt(2);BigInt(3);let n1=BigInt(5),n2=BigInt(8),n3=nL(nX,void 0,!0),n4={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:n3,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:n2,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ne,randomBytes:function(e=32){if(rW&&"function"==typeof rW.getRandomValues)return rW.getRandomValues(new Uint8Array(e));if(rW&&"function"==typeof rW.randomBytes)return rW.randomBytes(e);throw Error("crypto.getRandomValues must be defined")},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=nP(t*t*t,nX),n=nP(r*r*t,nX),i=function(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),a=e*e%nX,s=a*e%nX,o=nG(s,n0,nX)*s%nX,l=nG(o,nY,nX)*e%nX,u=nG(l,n1,nX)*l%nX,c=nG(u,t,nX)*u%nX,p=nG(c,r,nX)*c%nX,d=nG(p,n,nX)*p%nX,g=nG(d,i,nX)*d%nX,y=nG(g,i,nX)*d%nX,h=nG(y,t,nX)*u%nX,m=nG(h,n0,nX)*e%nX;return{pow_p_5_8:m,b2:s}}(e*n).pow_p_5_8,a=nP(e*r*i,nX),s=nP(t*a*a,nX),o=a,l=nP(a*nJ,nX),u=s===e,c=s===nP(-e,nX),p=s===nP(-e*nJ,nX);return u&&(a=o),(c||p)&&(a=l),n_(a,nX)&&(a=nP(-a,nX)),{isValid:u||c,value:a}}},n8=function(e){var t;let r=function(e){let t=(function(e){let t=nk.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});nx(e,t)}(e.Fp),nx(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nU(e.n,e.nBitLength),...e,p:e.Fp.ORDER}));return nx(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:n,n:i,prehash:a,hash:s,randomBytes:o,nByteLength:l,h:u}=r,c=nK<<BigInt(8*l)-n$,p=n.create,d=nL(r.n,r.nBitLength),g=r.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch(e){return{isValid:!1,value:nz}}}),y=r.adjustScalarBytes||(e=>e),h=r.domain||((e,t,r)=>{if(ns("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function m(e,t){nb("coordinate "+e,t,nz,c)}function f(e){if(!(e instanceof C))throw Error("ExtendedPoint expected")}let w=nB((e,t)=>{let{ex:r,ey:i,ez:a}=e,s=e.is0();null==t&&(t=s?nZ:n.inv(a));let o=p(r*t),l=p(i*t),u=p(a*t);if(s)return{x:nz,y:n$};if(u!==n$)throw Error("invZ was invalid");return{x:o,y:l}}),b=nB(e=>{let{a:t,d:n}=r;if(e.is0())throw Error("bad point: ZERO");let{ex:i,ey:a,ez:s,et:o}=e,l=p(i*i),u=p(a*a),c=p(s*s),d=p(c*c),g=p(l*t),y=p(c*p(g+u)),h=p(d+p(n*p(l*u)));if(y!==h)throw Error("bad point: equation left != right (1)");let m=p(i*a),f=p(s*o);if(m!==f)throw Error("bad point: equation left != right (2)");return!0});class C{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,m("x",e),m("y",t),m("z",r),m("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof C)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return m("x",t),m("y",r),new C(t,r,n$,p(t*r))}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(C.fromAffine)}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,a=function(e){let t;for(t=0;e>nt;e>>=nr,t+=1);return t}(BigInt(r.length)),s=a>12?a-3:a>4?a-2:a?2:1,o=(1<<s)-1,l=Array(o+1).fill(i),u=Math.floor((t.BITS-1)/s)*s,c=i;for(let e=u;e>=0;e-=s){l.fill(i);for(let t=0;t<n.length;t++){let i=n[t],a=Number(i>>BigInt(e)&BigInt(o));l[a]=l[a].add(r[t])}let t=i;for(let e=l.length-1,r=i;e>0;e--)r=r.add(l[e]),t=t.add(r);if(c=c.add(t),0!==e)for(let e=0;e<s;e++)c=c.double()}return c}(C,d,e,t)}_setWindowSize(e){B.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){f(e);let{ex:t,ey:r,ez:n}=this,{ex:i,ey:a,ez:s}=e,o=p(t*s),l=p(i*n),u=p(r*s),c=p(a*n);return o===l&&u===c}is0(){return this.equals(C.ZERO)}negate(){return new C(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){let{a:e}=r,{ex:t,ey:n,ez:i}=this,a=p(t*t),s=p(n*n),o=p(nK*p(i*i)),l=p(e*a),u=t+n,c=p(p(u*u)-a-s),d=l+s,g=d-o,y=l-s,h=p(c*g),m=p(d*y),f=p(c*y),w=p(g*d);return new C(h,m,w,f)}add(e){f(e);let{a:t,d:n}=r,{ex:i,ey:a,ez:s,et:o}=this,{ex:l,ey:u,ez:c,et:d}=e;if(t===BigInt(-1)){let e=p((a-i)*(u+l)),t=p((a+i)*(u-l)),r=p(t-e);if(r===nz)return this.double();let n=p(s*nK*d),g=p(o*nK*c),y=g+n,h=t+e,m=g-n,f=p(y*r),w=p(h*m),b=p(y*m),S=p(r*h);return new C(f,w,S,b)}let g=p(i*l),y=p(a*u),h=p(o*n*d),m=p(s*c),w=p((i+a)*(l+u)-g-y),b=m-h,S=m+h,x=p(y-t*g),B=p(w*b),A=p(S*x),E=p(w*x),v=p(b*S);return new C(B,A,v,E)}subtract(e){return this.add(e.negate())}wNAF(e){return B.wNAFCached(this,e,C.normalizeZ)}multiply(e){nb("scalar",e,n$,i);let{p:t,f:r}=this.wNAF(e);return C.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=C.ZERO){return(nb("scalar",e,nz,i),e===nz)?x:this.is0()||e===n$?this:B.wNAFCachedUnsafe(this,e,C.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return B.unsafeLadder(this,i).is0()}toAffine(e){return w(this,e)}clearCofactor(){let{h:e}=r;return e===n$?this:this.multiplyUnsafe(e)}static fromHex(e,t=!1){let{d:i,a}=r,s=n.BYTES;e=nm("pointHex",e,s),ns("zip215",t);let o=e.slice(),l=e[s-1];o[s-1]=-129&l;let u=ng(o),d=t?c:n.ORDER;nb("pointHex.y",u,nz,d);let y=p(u*u),h=p(y-n$),m=p(i*y-a),{isValid:f,value:w}=g(h,m);if(!f)throw Error("Point.fromHex: invalid y coordinate");let b=(w&n$)===n$,S=(128&l)!=0;if(!t&&w===nz&&S)throw Error("Point.fromHex: x=0 and x_0=1");return S!==b&&(w=p(-w)),C.fromAffine({x:w,y:u})}static fromPrivateKey(e){return A(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=nh(t,n.BYTES);return r[r.length-1]|=e&n$?128:0,r}toHex(){return nl(this.toRawBytes())}}C.BASE=new C(r.Gx,r.Gy,n$,p(r.Gx*r.Gy)),C.ZERO=new C(nz,n$,n$,nz);let{BASE:S,ZERO:x}=C,B=(t=8*l,{constTimeNegate:nD,hasPrecomputes:e=>1!==nF(e),unsafeLadder(e,t,r=C.ZERO){let n=e;for(;t>nN;)t&nq&&(r=r.add(n)),n=n.double(),t>>=nq;return r},precomputeWindow(e,r){let{windows:n,windowSize:i}=nQ(r,t),a=[],s=e,o=s;for(let e=0;e<n;e++){o=s,a.push(o);for(let e=1;e<i;e++)o=o.add(s),a.push(o);s=o.double()}return a},wNAF(e,r,n){let{windows:i,windowSize:a}=nQ(e,t),s=C.ZERO,o=C.BASE,l=BigInt(2**e-1),u=2**e,c=BigInt(e);for(let e=0;e<i;e++){let t=e*a,i=Number(n&l);n>>=c,i>a&&(i-=u,n+=nq);let p=t+Math.abs(i)-1,d=e%2!=0,g=i<0;0===i?o=o.add(nD(d,r[t])):s=s.add(nD(g,r[p]))}return{p:s,f:o}},wNAFUnsafe(e,r,n,i=C.ZERO){let{windows:a,windowSize:s}=nQ(e,t),o=BigInt(2**e-1),l=2**e,u=BigInt(e);for(let e=0;e<a;e++){let t=e*s;if(n===nN)break;let a=Number(n&o);if(n>>=u,a>s&&(a-=l,n+=nq),0===a)continue;let c=r[t+Math.abs(a)-1];a<0&&(c=c.negate()),i=i.add(c)}return i},getPrecomputes(e,t,r){let n=nH.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&nH.set(t,r(n))),n},wNAFCached(e,t,r){let n=nF(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=nF(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){nj(r,t),nV.set(e,r),nH.delete(e)}});function A(e){let t=n.BYTES;e=nm("private key",e,t);let r=nm("hashed private key",s(e),2*t),a=y(r.slice(0,t)),o=r.slice(t,2*t),l=nP(ng(a),i),u=S.multiply(l),c=u.toRawBytes();return{head:a,prefix:o,scalar:l,point:u,pointBytes:c}}function E(e=new Uint8Array,...t){let r=nf(...t);return nP(ng(s(h(r,nm("context",e),!!a))),i)}return S._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return A(e).pointBytes},sign:function(e,t,r={}){e=nm("message",e),a&&(e=a(e));let{prefix:s,scalar:o,pointBytes:l}=A(t),u=E(r.context,s,e),c=S.multiply(u).toRawBytes(),p=E(r.context,c,l,e),d=nP(u+p*o,i);nb("signature.s",d,nz,i);let g=nf(c,nh(d,n.BYTES));return nm("result",g,2*n.BYTES)},verify:function(e,t,r,i=nW){let s,o,l;let{context:u,zip215:c}=i,p=n.BYTES;e=nm("signature",e,2*p),t=nm("message",t),r=nm("publicKey",r,p),void 0!==c&&ns("zip215",c),a&&(t=a(t));let d=ng(e.slice(p,2*p));try{s=C.fromHex(r,c),o=C.fromHex(e.slice(0,p),c),l=S.multiplyUnsafe(d)}catch(e){return!1}if(!c&&s.isSmallOrder())return!1;let g=E(u,o.toRawBytes(),s.toRawBytes(),t),y=o.add(s.multiplyUnsafe(g));return y.subtract(l).clearCofactor().equals(C.ZERO)},ExtendedPoint:C,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>o(n.BYTES),precompute:(e=8,t=C.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}(n4),n5=BigInt(4294967296-1),n6=BigInt(32),n7=(e,t,r)=>e<<r|t>>>32-r,n9=(e,t,r)=>t<<r|e>>>32-r,ie=(e,t,r)=>t<<r-32|e>>>64-r,it=(e,t,r)=>e<<r-32|t>>>64-r,ir=[],ii=[],ia=[],is=BigInt(0),io=BigInt(1),il=BigInt(2),iu=BigInt(7),ic=BigInt(256),ip=BigInt(113);for(let e=0,t=io,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],ir.push(2*(5*n+r)),ii.push((e+1)*(e+2)/2%64);let i=is;for(let e=0;e<7;e++)(t=(t<<io^(t>>iu)*ip)%ic)&il&&(i^=io<<(io<<BigInt(e))-io);ia.push(i)}let[id,ig]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:a,l:s}=function(e,t=!1){return t?{h:Number(e&n5),l:Number(e>>n6&n5)}:{h:0|Number(e>>n6&n5),l:0|Number(e&n5)}}(e[i],t);[r[i],n[i]]=[a,s]}return[r,n]}(ia,!0),iy=(e,t,r)=>r>32?ie(e,t,r):n7(e,t,r),ih=(e,t,r)=>r>32?it(e,t,r):n9(e,t,r);class im extends eW{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,e_(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ej(this.state)}keccak(){eV||ez(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,a=r[i],s=r[i+1],o=iy(a,s,1)^r[n],l=ih(a,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=ii[r],a=iy(t,i,n),s=ih(t,i,n),o=ir[r];t=e[o],i=e[o+1],e[o]=a,e[o+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=id[n],e[1]^=ig[n]}r.fill(0)}(this.state32,this.rounds),eV||ez(this.state32),this.posOut=0,this.pos=0}update(e){eL(this);let{blockLen:t,state:r}=this;e=eZ(e);let n=e.length;for(let i=0;i<n;){let a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){eL(this,!1),ek(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let a=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return e_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eN(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return e||(e=new im(t,r,n,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=a,e.destroyed=this.destroyed,e}}let iw=eX(()=>new im(136,1,32)),ib=(()=>{let e=e=>(eq.bytes(e),iw(e));return e.create=iw.create,e})(),iC=(e,t)=>{let r=iS(t,ik),n=[];return r.forEach(e=>{let r=t.get(e);n.push(`${e}:${r}`)}),e.url&&e.url.hostname&&n.push(e.url.hostname),n.push(""),n.join("\n")},iS=(e,t)=>{let r=[];return e.forEach((e,n)=>{t.includes(n)&&r.push(n)}),r.sort()},ix=e=>{let t=iS(e,ik);return t.join(";")},iB=(e,t)=>{let r=iC(e,t),n=ix(t),i=[e.method,e.url?.path,e.url?.query,r,n],a=i.join("\n");return a},iA=(e,t)=>{let r=iL(eK(e)),n="";if("ECDSA"===t.type){let e=iU(r,t.privateKey);n=`GNFD1-ECDSA, Signature=${e.slice(2)}`}else{let e=(0,s.Dv)(n8.sign((0,s.Dv)(r).slice(2),t.seed.slice(2)));n=`GNFD2-EDDSA,Signature=${e.slice(2)}`}return n},iE=e=>{let t=new H.Headers;e.contentType&&t.set(iP.toLocaleLowerCase(),e.contentType),e.txnHash&&""!==e.txnHash&&t.set(iI.toLocaleLowerCase(),e.txnHash),e.contentSHA256&&t.set(iT.toLocaleLowerCase(),e.contentSHA256),e.unsignMsg&&t.set(iG.toLocaleLowerCase(),e.unsignMsg),e.userAddress&&t.set(iO,e.userAddress);let r=new Date;return e.date?t.set(iM.toLocaleLowerCase(),iv(e.date)):t.set(iM.toLocaleLowerCase(),iv(r)),e.expiryTimestamp?t.set(iR.toLocaleLowerCase(),iv(e.expiryTimestamp)):(r.setHours(r.getHours()+2),t.set(iR.toLocaleLowerCase(),iv(r))),t};function iv(e){let t=e.toISOString();return t.replace(/\.\d{3}/gi,"")}let iT="X-Gnfd-Content-Sha256",iI="X-Gnfd-Txn-Hash",iM="X-Gnfd-Date",iR="X-Gnfd-Expiry-Timestamp",iP="Content-Type",iG="X-Gnfd-Unsigned-Msg",iO="X-Gnfd-User-Address",i_="X-Gnfd-App-Reg-Public-Key",ik=[iT.toLocaleLowerCase(),iI.toLocaleLowerCase(),"X-Gnfd-Object-ID".toLocaleLowerCase(),"X-Gnfd-Redundancy-Index".toLocaleLowerCase(),"X-Gnfd-Resource".toLocaleLowerCase(),iM.toLocaleLowerCase(),iR.toLocaleLowerCase(),"Range".toLocaleLowerCase(),"X-Gnfd-Piece-Index".toLocaleLowerCase(),iP.toLocaleLowerCase(),"Content-MD5".toLocaleLowerCase(),iG.toLocaleLowerCase(),iO.toLocaleLowerCase()],iU=(e,t)=>{let r=new Z.Et(t),n=r.signDigest(e),i=(0,s.gV)(n),a=i.slice(-2);return"1c"===a&&(i=i.slice(0,-2)+"01"),"1b"===a&&(i=i.slice(0,-2)+"00"),i},iL=e=>{let t=ib(e);return t},iN=e=>{if(/^[a-zA-Z0-9-_.~/]+$/.test(e))return e;let t="";for(let r=0;r<e.length;r++){let n=e[r];if("A"<=n&&n<="Z"||"a"<=n&&n<="z"||"0"<=n&&n<="9"){t+=n;continue}switch(n){case"-":case"_":case".":case"~":case"/":t+=n;continue;default:{let e=(0,o.Y0)(n);for(let r=0;r<e.length;r++){let n=(0,s.Dv)(e[r]);t+="%"+n.slice(2).toUpperCase()}}}}return t},iq=e=>{let t=new URLSearchParams;for(let r in e)t.append(r,e[r]);return t.sort(),t.toString()},iD=(e,t)=>{for(let r in t)e.searchParams.append(r,t[r]);return e.searchParams.sort(),e},ij=(e,t,r)=>{let n="/greenfield/admin/v1/get-approval",i=new URL(n,e);i=iD(i,{action:t});let a=function(e){ek(e);let t="";for(let r=0;r<e.length;r++)t+=e$[e[r]];return t}(eK(JSON.stringify(r))),s={contentSHA256:ri,unsignMsg:a,method:"GET",url:{hostname:i.hostname,query:i.searchParams.toString(),path:n}};return{url:i.href,optionsWithOutHeaders:{method:"GET"},reqMeta:s}};function iQ(e){let t=e.Tags.Tags||[];return Array.isArray(t)||(t=[t]),{...e,BucketStatus:Number(e.BucketStatus),ChargedReadQuota:Number(e.ChargedReadQuota),CreateAt:Number(e.CreateAt),GlobalVirtualGroupFamilyId:Number(e.GlobalVirtualGroupFamilyId),SourceType:Number(e.SourceType),Visibility:Number(e.Visibility),SpAsDelegatedAgentDisabled:iV(e.SpAsDelegatedAgentDisabled),Tags:{Tags:t}}}function iH(e){let t=e.Tags.Tags||[];return Array.isArray(t)||(t=[t]),{...e,CreateAt:Number(e.CreateAt),Id:Number(e.Id),LocalVirtualGroupId:Number(e.LocalVirtualGroupId),ObjectStatus:Number(e.ObjectStatus),PayloadSize:Number(e.PayloadSize),RedundancyType:Number(e.RedundancyType),SourceType:Number(e.SourceType),Visibility:Number(e.Visibility),Tags:{Tags:t}}}function iV(e){return"true"===String(e).toLowerCase()}function iF(e){let t=e.Tags.Tags||[];return Array.isArray(t)||(t=[t]),{...e,SourceType:Number(e.SourceType),Id:Number(e.Id),Tags:{Tags:t}}}let iz=(e,t)=>{let r=`/${t.bucketName}`,n=new URL(r,e);return{url:(n=iD(n,{"bucket-meta":""})).href}},i$=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e);return r.GfSpGetBucketMetaResponse.Bucket={...r.GfSpGetBucketMetaResponse.Bucket,BucketInfo:iQ(r.GfSpGetBucketMetaResponse.Bucket.BucketInfo),DeleteAt:Number(r.GfSpGetBucketMetaResponse.Bucket.DeleteAt),UpdateAt:Number(r.GfSpGetBucketMetaResponse.Bucket.UpdateAt),UpdateTime:Number(r.GfSpGetBucketMetaResponse.Bucket.UpdateTime)},r},iK=e=>({url:e}),iZ=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpGetUserBucketsResponse.Buckets||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>{var t;return{...e,BucketInfo:iQ(e.BucketInfo),Removed:iV(e.Removed),DeleteAt:Number(e.DeleteAt),UpdateAt:Number(e.UpdateAt),UpdateTime:Number(e.UpdateTime),Vgf:{...t=e.Vgf,Id:Number(t.Id),PrimarySpId:Number(t.PrimarySpId)}}})),r.GfSpGetUserBucketsResponse={Buckets:n},r},iW=(e,t=ro,r)=>({spendLimit:[{amount:e,denom:t}],expiration:r}),iX=(e,t)=>({allowedMessages:e,allowance:i.Any.fromPartial({typeUrl:rr,value:er.BasicAllowance.encode(t).finish()})}),iJ=(e,t,r)=>({grantee:e,granter:t,allowance:i.Any.fromPartial({typeUrl:rn,value:er.AllowedMsgAllowance.encode(r).finish()})}),iY=(e,t=ro,r,n)=>({"@type":rn,allowance:{"@type":rr,expiration:(0,Q.fromTimestamp)(n),spend_limit:[{amount:e,denom:t}]},allowed_messages:r}),i0=/^(\d+\.){3}\d+$/g,i1=/^[a-z0-9][a-z0-9.\-]{1,61}[a-z0-9]$/g,i2=e=>{if(!e)throw Error("Bucket name is empty, please check.");let t=e.length;if(t<3||t>63)throw Error("Bucket name length is required to be between 3~63, please check.");if(e.match(i0))throw Error("The bucket name %s cannot be formatted as an IP address, please check.");if(e.includes("..")||e.includes(".-")||e.includes("-."))throw Error("Bucket name contains invalid characters, please check.");if(!e.match(i1))throw Error("Bucket name can only include lowercase letters, numbers, commas and hyphen, please check.");if("-"===e[0]||"-"===e[t-1]||"."===e[0]||"."===e[t-1])throw Error("Bucket name %must start and end with a lowercase letter or number, please check.")},i3=e=>{let t=e.trim();for(let e of t.split("/"))switch(e.trim()){case"..":case".":return!0}return!1},i4=e=>{try{return new TextDecoder("utf-8").decode(new TextEncoder().encode(e)),!0}catch{return!1}},i8=e=>{if(!e)throw Error("Object name is empty, please check.");if(e.length>1024)throw Error("Object name is limited to 1024 at most, please check.");if(i3(e))throw Error("Object name error, please check.");if(!i4(e))throw Error("Object name is not in UTF-8 format, please check.");if(e.includes("//"))throw Error('Object name that contains a "//" is not supported')},i5=e=>{if(!e)throw Error("Address is empty, please check.");if(e.length>1024)throw Error("Address is limited to 1024 at most, please check.")},i6=e=>{if(!e||0===e.length)return!1;let t=RegExp("^(https?:\\/\\/)?((([a-zA-Z\\d]([a-zA-Z\\d-]{0,61}[a-zA-Z\\d])?)\\.)+[a-zA-Z]{2,13})(\\:\\d{1,5})?(\\/[-a-zA-Z\\d%_.~+]*)*(\\?[;&a-zA-Z\\d%_.~+=-]*)?(\\#[-a-zA-Z\\d_]*)?$","i");if(!t.test(e))throw Error("Invalid endpoint")},i7=(e="",t)=>{i2(t),i6(e);let{protocol:r}=new URL(e);return e.replace(`${r}//`,`${r}//${t}.`)},i9=e=>{for(let t of[/;.*select/,/;.*insert/,/;.*update/,/;.*delete/,/;.*drop/,/;.*alter/,/\/\*[\s\S]*?\*\//]){let r=t.test(e);if(r)return!0}return!1},ae=e=>{if(e.includes("..")||"/"===e||e.includes("\\")||i9(e))throw Error(`fail to check object name: ${e}`)},at=(e="")=>e.charCodeAt(0).toString(16),ar=(e="")=>e.split("").map(at).join(""),an=(e="")=>{let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.slice(r,r+2),16);return t},ai=(e="")=>(function(e){let t=new TextDecoder("utf-8"),r=t.decode(e);return JSON.parse(r)})(an(e)),aa=e=>({resType:es.ResourceType.RESOURCE_TYPE_BUCKET,groupOwner:"",name:e}),as=(e,t)=>{let r=[e,t].join("/");return{name:r,resType:es.ResourceType.RESOURCE_TYPE_OBJECT,groupOwner:""}},ao=(e,t)=>({resType:es.ResourceType.RESOURCE_TYPE_GROUP,groupOwner:e,name:t}),al=e=>{let t="";switch(e.resType){case es.ResourceType.RESOURCE_TYPE_BUCKET:t=`grn:b::${e.name}`;break;case es.ResourceType.RESOURCE_TYPE_OBJECT:t=`grn:o::${e.name}`;break;case es.ResourceType.RESOURCE_TYPE_GROUP:t=`grn:g:${e.groupOwner}:${e.name}`;break;default:return""}return t.trim()},au=()=>(el().extend(ec()),el()().utc().valueOf()),ac=e=>(el().extend(ec()),el().extend(ed()),el()(e).tz("Iceland").format()),ap=(e,t)=>{let{bucketName:r,endTimeStamp:n,maxRecords:i,startTimeStamp:a}=t,s={"list-read-record":"null","end-timestamp":String(n),"max-records":String(i),"start-timestamp":String(a)},o=new URL("/",i7(e,r));o=iD(o,s);let l={contentSHA256:ri,method:"GET",url:{hostname:o.hostname,query:o.searchParams.toString(),path:"/"}};return{url:o.href,optionsWithOutHeaders:{method:"GET"},reqMeta:l}},ad=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GetBucketReadQuotaResult?.ReadRecords||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,ReadTimestampUs:Number(e.ReadTimestampUs),ReadSize:Number(e.ReadSize)}))),r.GetBucketReadQuotaResult={...r.GetBucketReadQuotaResult,ReadRecords:n},r},ag=(e,t)=>{let r={ids:t.ids.join(","),"buckets-query":"null"},n=new URL("/",e);return{url:(n=iD(n,r)).href}},ay=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpListBucketsByIDsResponse.BucketEntry||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>{let t=e.Value;return t&&(t={...e.Value,BucketInfo:iQ(e.Value.BucketInfo),Removed:iV(e.Value.Removed),UpdateAt:Number(e.Value.UpdateAt),DeleteAt:Number(e.Value.DeleteAt)}),{...e,Id:Number(e.Id),Value:t}})),r.GfSpListBucketsByIDsResponse={...r.GfSpListBucketsByIDsResponse,BucketEntry:n},r},ah=(e,t)=>{let r={"payment-buckets":"null","payment-account":t.paymentAccount},n=new URL("/",e);return{url:(n=iD(n,r)).href}},am=e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpListPaymentAccountStreamsResponse.Buckets||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,BucketInfo:iQ(e.BucketInfo),Removed:iV(e.Removed),DeleteAt:Number(e.DeleteAt),UpdateAt:Number(e.UpdateAt),UpdateTime:Number(e.UpdateTime)}))),r.GfSpListPaymentAccountStreamsResponse={Buckets:n},r},af=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e);return{code:r.Error.Code,message:r.Error.Message}},aw=async(e,t)=>{let{year:r,month:n,bucketName:i}=t,a=new Date,s=r||a.getFullYear(),o=n||a.getMonth()+1,l=o.toString().padStart(2,"0"),u={"year-month":`${s}-${l}`,"read-quota":"null"},c=iq(u),p=`${i7(e,i)}/?${c}`,d={contentSHA256:ri,method:"GET",url:{hostname:new URL(p).hostname,query:c,path:"/"}};return{url:p,optionsWithOutHeaders:{method:"GET"},reqMeta:d}},ab=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e);return r},aC=async(e="",t={},r=3e4)=>{try{let n=await Promise.race([new Promise((e,t)=>{setTimeout(()=>{t(Error("request time out"))},r)}),V()(e,t)]);return n}catch(e){return Promise.reject(e)}},aS=async(e,t)=>{let{bucketName:r,objectName:n}=t,i=`/${iN(n)}`,a=new URL(i,i7(e,r)),s={contentSHA256:ri,method:"GET",url:{hostname:new URL(a).hostname,query:"",path:i},contentType:"application/octet-stream"};return{url:a.href,optionsWithOutHeaders:{method:"GET"},reqMeta:s}},ax=async(e,t)=>{let{bucketName:r,objectName:n,txnHash:i,contentType:a,body:s,delegatedOpts:o}=t,l=`/${iN(n)}`,u={};o&&(u={delegate:"",payload_size:String(s.size),visibility:o.visibility.toString(),is_update:String(o.isUpdate||!1)});let c=new URL(l,i7(e,r));c=iD(c,u);let p={contentSHA256:ri,txnHash:i,method:"PUT",url:{hostname:c.hostname,query:c.searchParams.toString(),path:l},contentType:a};return{url:c.href,optionsWithOutHeaders:{method:"PUT"},reqMeta:p,file:s}},aB=class{async callApi(e,t,r=3e4,n){try{let i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await aC(e,{...t,signal:i.signal},r);clearTimeout(a);let{status:o}=s;if(429===o)throw{code:429,message:rs,statusCode:o};if(!s.ok){let e=await s.text(),{code:t,message:r}=await af(e);throw{code:t||n?.code,message:r||n?.message,statusCode:o}}return s}catch(e){return Promise.reject(e)}}async callApiV2(e,t,r=3e4,n){!function(e){if("GET"!==e&&"POST"!==e&&"PUT"!==e)throw Error("method should be GET, POST or PUT")}(t.method);try{let i=new(et()).Request(t.method,e);t.headers&&t.headers.forEach((e,t)=>{i.set(t,e)}),i.timeout(r),i.ok(e=>e.status<500);let a=await i.send(),{status:s}=a;if(429===s)throw{code:429,message:rs,statusCode:s};if(!a.ok){let e=a.text,{code:t,message:r}=await af(e);throw{code:t||n?.code,message:r||n?.message,statusCode:s}}return a}catch(e){return Promise.reject(e)}}async upload(e,t,r,n,i){let a=et().put(e);a.timeout(r),a.ok(e=>e.status<500),t.headers&&t.headers.forEach((e,t)=>{a.set(t,e)}),i&&i.onProgress&&a.on("progress",e=>{i.onProgress?.(e)});let s=r$(n)?n.content:n,o=ey.UG&&"application/json"===a.get("Content-Type")?s.toString():s;ey.UG&&a.buffer(!0);try{let e=await a.send(o),{status:t}=e;if(429===t)throw{code:429,message:rs,statusCode:t};if(!e.ok){let r=e.text,{code:n,message:a}=await af(r);throw{code:i?.customError?.code||n,message:i?.customError?.message||a,statusCode:t}}return e}catch(e){return Promise.reject(e)}}async signHeaders(e,t){let r=iE(e);if("EDDSA"===t.type){let{domain:e,address:n,seed:i}=t,a=(0,s.Dv)(n8.getPublicKey(i.slice(2)));r.set(iO,n),r.set("X-Gnfd-App-Domain",e),r.set(i_,a.slice(2))}let n=iB(e,r),i=iA(n,t);return r.set("Authorization",i),r}getMetaInfo(){return{PUT_OBJECT:ax,GET_OBJECT:aS}}};aB=ex([(0,n.b2)()],aB);let aA=(e,t)=>{let{name:r,prefix:n,sourceType:i,limit:a,offset:s}=t,o={"group-query":"null",name:r,prefix:n,"source-type":i,limit:String(a),offset:String(s)},l=new URL("/",e);return{url:(l=iD(l,o)).href}},aE=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpGetGroupListResponse.Groups||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,CreateAt:Number(e.CreateAt),CreateTime:Number(e.CreateTime),UpdateAt:Number(e.UpdateAt),UpdateTime:Number(e.UpdateTime),Removed:iV(e.Removed),Group:iF(e.Group)}))),r.GfSpGetGroupListResponse={Groups:n,Count:Number(r.GfSpGetGroupListResponse.Count)},r},av=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpGetGroupMembersResponse.Groups||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,CreateAt:Number(e.CreateAt),CreateTime:Number(e.CreateTime),UpdateAt:Number(e.UpdateAt),UpdateTime:Number(e.UpdateTime),Removed:iV(e.Removed),Group:iF(e.Group)}))),r},aT=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpGetUserGroupsResponse.Groups||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,CreateAt:Number(e.CreateAt),CreateTime:Number(e.CreateTime),UpdateAt:Number(e.UpdateAt),UpdateTime:Number(e.UpdateTime),Removed:iV(e.Removed),Group:iF(e.Group)}))),r.GfSpGetUserGroupsResponse={Groups:n},r},aI=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpGetUserOwnedGroupsResponse.Groups||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,CreateAt:Number(e.CreateAt),CreateTime:Number(e.CreateTime),UpdateAt:Number(e.UpdateAt),UpdateTime:Number(e.UpdateTime),Removed:iV(e.Removed),Group:iF(e.Group)}))),r.GfSpGetUserOwnedGroupsResponse={Groups:n},r},aM=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e);return r.QueryVerifyPermissionResponse={...r.QueryVerifyPermissionResponse,Effect:Number(r.QueryVerifyPermissionResponse.Effect)},r},aR={Msg1:[{name:"global_virtual_group_family_id",type:"uint32"},{name:"global_virtual_group_ids",type:"uint32[]"},{name:"storage_provider",type:"string"},{name:"type",type:"string"}]},aP=class{constructor(e){this.txClient=e,this.queryClient=n.nC.resolve(t7)}async params(){let e=await this.queryClient.getVirtualGroupClient();return await e.Params()}async getGlobalVirtualGroup(e){let t=await this.queryClient.getVirtualGroupClient();return await t.GlobalVirtualGroup(e)}async getGlobalVirtualGroupByFamilyID(e){let t=await this.queryClient.getVirtualGroupClient();return await t.GlobalVirtualGroupByFamilyID(e)}async getGlobalVirtualGroupFamilies(e){let t=await this.queryClient.getVirtualGroupClient();return await t.GlobalVirtualGroupFamilies(e)}async getGlobalVirtualGroupFamily(e){let t=await this.queryClient.getVirtualGroupClient();return await t.GlobalVirtualGroupFamily(e)}async getSpOptimalGlobalVirtualGroupFamily(e){let t=await this.queryClient.getVirtualGroupClient();return await t.QuerySpOptimalGlobalVirtualGroupFamily(e)}async getSpAvailableGlobalVirtualGroupFamilies(e){let t=await this.queryClient.getVirtualGroupClient();return await t.QuerySpAvailableGlobalVirtualGroupFamilies(e)}async settle(e,t){return await this.txClient.tx("/greenfield.virtualgroup.MsgSettle",e,aR,ei.MsgSettle.toSDK(t),ei.MsgSettle.encode(t).finish())}};aP=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],aP);let aG=class{constructor(){this.bucket=n.nC.resolve(ak),this.queryClient=n.nC.resolve(t7),this.virtualGroup=n.nC.resolve(aP),this.spClient=n.nC.resolve(aB)}async getStorageProviders(){let e=await this.queryClient.getSpQueryClient(),t=await e.StorageProviders();return t.sps}async getStorageProviderInfo(e){let t=await this.queryClient.getSpQueryClient(),r=await t.StorageProvider({id:e});return r.storageProvider}async getQuerySpStoragePrice(e){let t=await this.queryClient.getSpQueryClient();return await t.QuerySpStoragePrice(e)}async getQueryGlobalSpStorePriceByTime(e){let t=await this.queryClient.getSpQueryClient();return await t.QueryGlobalSpStorePriceByTime(e)}async getStorageProviderByOperatorAddress(e){let t=await this.queryClient.getSpQueryClient();return await t.StorageProviderByOperatorAddress(e)}async getStorageProviderMaintenanceRecordsByOperatorAddress(e){let t=await this.queryClient.getSpQueryClient();return await t.StorageProviderMaintenanceRecordsByOperatorAddress(e)}async getSPUrlById(e){let t=await this.getStorageProviders();return t.filter(t=>t.id===e)[0].endpoint}async getSPUrlByBucket(e){let{bucketInfo:t}=await this.bucket.headBucket(e);if(!t)throw Error("Get bucket info error");let r=await this.virtualGroup.getGlobalVirtualGroupFamily({familyId:t.globalVirtualGroupFamilyId}),n=await this.getStorageProviders(),i=r.globalVirtualGroupFamily?.primarySpId;return n.filter(e=>e.id===i)[0].endpoint}async getSPUrlByPrimaryAddr(e){let t=await this.getStorageProviders();return t.filter(t=>t.operatorAddress===e)[0].endpoint}async params(){let e=await this.queryClient.getSpQueryClient();return await e.Params()}async getInServiceSP(){let e=await this.getStorageProviders(),t=e.filter(e=>e.status===eh.Status.STATUS_IN_SERVICE);if(0===t.length)throw Error("No storage provider found");return t[0]}async listGroups(e){try{let{name:t,prefix:r}=e,n={GfSpGetGroupListResponse:{Groups:[],Count:0}};if(""===t||""===r)return{code:0,message:"success",body:n};let i=await this.getInServiceSP(),{url:a}=aA(i.endpoint,e),s=await this.spClient.callApi(a,{headers:{},method:"GET"},3e3),{status:o}=s;if(!s.ok){let e=await s.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"error",statusCode:o}}let l=await s.text();return n=await aE(l),{code:0,message:"success",statusCode:o,body:n}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async verifyPermission(e){try{let{action:t,bucketName:r,objectName:n,operator:i}=e,a=await this.getInServiceSP(),s=`${a.endpoint}/permission/${i}/${r}/${(0,N.actionTypeFromJSON)(t)}`;n&&(s+=`?object=${iN(n)}`);let o=await this.spClient.callApi(s,{headers:{},method:"GET"},3e3),{status:l}=o;if(!o.ok){let e=await o.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"error",statusCode:l}}let u=await o.text(),c=await aM(u);return{code:0,message:"success",statusCode:l,body:c}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async listGroupsMembers(e){try{let{groupId:t,limit:r,startAfter:n}=e,i=await this.getInServiceSP(),a=`${i.endpoint}?group-members&group-id=${t}`;r&&(a+=`&limit=${r}`),n&&(a+=`&start-after=${n}`);let s=await this.spClient.callApi(a,{headers:{},method:"GET"},3e3),{status:o}=s;if(!s.ok){let e=await s.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"error",statusCode:o}}let l=await s.text(),u=await av(l);return{code:0,message:"success",statusCode:o,body:u}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async listUserGroups(e){try{let{address:t,limit:r,startAfter:n}=e,i=await this.getInServiceSP(),a=`${i.endpoint}?user-groups`;r&&(a+=`&limit=${r}`),n&&(a+=`&start-after=${n}`);let s=new Headers({[iO]:t}),o=await this.spClient.callApi(a,{headers:s,method:"GET"},3e3),{status:l}=o;if(!o.ok){let e=await o.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"error",statusCode:l}}let u=await o.text(),c=await aT(u);return{code:0,message:"success",statusCode:l,body:c}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async listUserOwnedGroups(e){try{let{address:t,limit:r,startAfter:n}=e,i=await this.getInServiceSP(),a=`${i.endpoint}?owned-groups`;r&&(a+=`&limit=${r}`),n&&(a+=`&start-after=${n}`);let s=new Headers({[iO]:t}),o=await this.spClient.callApi(a,{headers:s,method:"GET"},3e3),{status:l}=o;if(!o.ok){let e=await o.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"error",statusCode:l}}let u=await o.text(),c=await aI(u);return{code:0,message:"success",statusCode:l,body:c}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}};aG=ex([(0,n.b2)()],aG);let aO=class{constructor(e){this.txClient=e,this.queryClient=n.nC.resolve(t7)}async params(){let e=await this.queryClient.getStorageQueryClient();return await e.Params()}async putPolicy(e){let t=D.MsgPutPolicy.toSDK(e);return await this.txClient.tx("/greenfield.storage.MsgPutPolicy",e.operator,rO(e.statements[0].resources),{...t,expiration_time:e.expirationTime?(0,Q.fromTimestamp)(e.expirationTime):"",statements:t.statements.map(e=>(e.expiration_time?e.expiration_time=(0,Q.fromTimestamp)(e.expiration_time):e.expiration_time="",0==e.resources.length&&(e.resources=null),e))},D.MsgPutPolicy.encode(e).finish())}async deletePolicy(e){return await this.txClient.tx("/greenfield.storage.MsgDeletePolicy",e.operator,rT,D.MsgDeletePolicy.toSDK(e),D.MsgDeletePolicy.encode(e).finish())}async setTag(e){let t=e?.tags?.tags?.length===0,r=rk(t);return await this.txClient.tx("/greenfield.storage.MsgSetTag",e.operator,r,D.MsgSetTag.toSDK(e),D.MsgSetTag.encode(e).finish())}async getPolicyForGroup(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryPolicyForGroup(e)}async getQueryPolicyForAccount(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryPolicyForAccount(e)}async getQueryPolicyForGroup(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryPolicyForGroup(e)}async getQueryPolicyById(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryPolicyById(e)}async queryLockFee(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryLockFee(e)}async queryGroupMembersExist(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryGroupMembersExist(e)}async queryGroupExist(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryGroupsExist(e)}async queryGroupsExistById(e){let t=await this.queryClient.getStorageQueryClient();return await t.QueryGroupsExistById(e)}};aO=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],aO);let a_={Msg1:[{name:"bucket_name",type:"string"},{name:"operator",type:"string"},{name:"type",type:"string"}]},ak=class{constructor(e,t,r,i){this.txClient=e,this.sp=t,this.storage=r,this.virtualGroup=i,this.queryClient=n.nC.resolve(t7),this.spClient=n.nC.resolve(aB)}async setPaymentAccountFlowRateLimit(e){return await this.txClient.tx("/greenfield.storage.MsgSetBucketFlowRateLimit",e.operator,rH,D.MsgSetBucketFlowRateLimit.toSDK(e),D.MsgSetBucketFlowRateLimit.encode(e).finish())}async createBucket(e){rV(e.primarySpAddress,"Primary sp address is missing"),rV(e.creator,"Empty creator address"),i2(e.bucketName);let{storageProvider:t}=await this.sp.getStorageProviderByOperatorAddress({operatorAddress:e.primarySpAddress});if(!t)throw Error(`Storage provider ${e.primarySpAddress} not found`);let{globalVirtualGroupFamilyId:r}=await this.virtualGroup.getSpOptimalGlobalVirtualGroupFamily({spId:t.id,pickVgfStrategy:j.PickVGFStrategy.Strategy_Oldest_Create_Time}),n={...e,primarySpApproval:{globalVirtualGroupFamilyId:r,expiredHeight:C.Z.fromInt(0),sig:Uint8Array.from([])}};return await this.txClient.tx("/greenfield.storage.MsgCreateBucket",e.creator,rS,{...D.MsgCreateBucket.toSDK(n),primary_sp_approval:{expired_height:"0",global_virtual_group_family_id:r},charged_read_quota:n.chargedReadQuota.toString()},D.MsgCreateBucket.encode(n).finish())}async deleteBucket(e){return await this.txClient.tx("/greenfield.storage.MsgDeleteBucket",e.operator,rA,D.MsgDeleteBucket.toSDK(e),D.MsgDeleteBucket.encode(e).finish())}async toggleSpAsDelegatedAgent(e){let{bucketInfo:t}=await this.headBucket(e.bucketName);if(!t)throw Error(`Bucket ${e.bucketName} not found`);return await this.txClient.tx("/greenfield.storage.MsgToggleSPAsDelegatedAgent",e.operator,rL,D.MsgToggleSPAsDelegatedAgent.toSDK(e),D.MsgToggleSPAsDelegatedAgent.encode(e).finish())}async headBucket(e){let t=await this.queryClient.getStorageQueryClient();return await t.HeadBucket({bucketName:e})}async headBucketById(e){let t=await this.queryClient.getStorageQueryClient();return await t.HeadBucketById({bucketId:e})}async headBucketExtra(e){let t=await this.queryClient.getStorageQueryClient();return await t.HeadBucketExtra({bucketName:e})}async headBucketNFT(e){let t=await this.queryClient.getStorageQueryClient();return await t.HeadBucketNFT(e)}async getVerifyPermission(e,t,r){let n=await this.queryClient.getStorageQueryClient();return n.VerifyPermission({bucketName:e,operator:t,objectName:"",actionType:r})}async listBuckets(e){try{let{address:t,duration:r=3e4,endpoint:n}=e;i5(t),i6(n);let{url:i}=iK(n),a=new H.Headers({[iO]:t}),s=await this.spClient.callApi(i,{headers:a,method:"GET"},r),{status:o}=s;if(!s.ok){let e=await s.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"Get bucket error.",statusCode:o}}let l=await s.text(),u=await iZ(l);return{code:0,message:"Get bucket success.",statusCode:o,body:u.GfSpGetUserBucketsResponse.Buckets}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async getBucketReadQuota(e,t){try{let{bucketName:r,duration:n=3e4}=e;i2(r),rz(t);let i=e.endpoint;i||(i=await this.sp.getSPUrlByBucket(r));let{url:a,optionsWithOutHeaders:s,reqMeta:o}=await aw(i,e),l=await this.spClient.signHeaders(o,t),u=await this.spClient.callApi(a,{...s,headers:l},n,{code:-1,message:"Get Bucket Quota error."}),c=await u.text(),p=await ab(c);return{code:0,body:{readQuota:Number(p.GetReadQuotaResult.ReadQuotaSize??"0"),freeQuota:Number(p.GetReadQuotaResult.SPFreeReadQuotaSize??"0"),consumedQuota:Number(p.GetReadQuotaResult.ReadConsumedSize??"0"),freeConsumedSize:Number(p.GetReadQuotaResult.FreeConsumedSize??"0"),monthlyFreeQuota:Number(p.GetReadQuotaResult.MonthlyFreeQuota??"0"),monthlyQuotaConsumedSize:Number(p.GetReadQuotaResult.MonthlyQuotaConsumedSize??"0")},message:"Get bucket read quota.",statusCode:u.status}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async updateBucketInfo(e){let t={...e,visibility:(0,q.visibilityTypeFromJSON)(e.visibility),chargedReadQuota:L.UInt64Value.fromPartial({value:C.Z.fromString(e.chargedReadQuota)})};return await this.txClient.tx("/greenfield.storage.MsgUpdateBucketInfo",t.operator,rN,{...D.MsgUpdateBucketInfo.toSDK(t),charged_read_quota:{value:e.chargedReadQuota}},D.MsgUpdateBucketInfo.encode(t).finish())}async putBucketPolicy(e,t){let r=al(aa(e)),n={...t,resource:r};return this.storage.putPolicy(n)}async deleteBucketPolicy(e,t,r,n){let i=al(aa(t)),a={type:(0,N.principalTypeFromJSON)(n),value:r};return await this.storage.deletePolicy({resource:i,principal:a,operator:e})}async getBucketPolicy(e){let t=await this.queryClient.getStorageQueryClient();return t.QueryPolicyForAccount(e)}async getMigrateBucketApproval(e,t){rz(t);let{bucketName:r,operator:n,dstPrimarySpId:i}=e;try{let a=e.endpoint;a||(a=await this.sp.getSPUrlById(e.dstPrimarySpId));let{reqMeta:s,optionsWithOutHeaders:o,url:l}=ij(a,"MigrateBucket",{operator:n,bucket_name:r,dst_primary_sp_id:i,dst_primary_sp_approval:{expired_height:"0",sig:"",global_virtual_group_family_id:0}}),u=await this.spClient.signHeaders(s,t),c=await this.spClient.callApi(l,{...o,headers:u},3e4),p=c.headers.get("X-Gnfd-Signed-Msg")||"",d=ai(p);return{code:0,message:"Get migrate bucket approval success.",body:p,statusCode:c.status,signedMsg:d}}catch(e){throw{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async migrateBucket(e,t){rz(t);let{signedMsg:r}=await this.getMigrateBucketApproval(e,t);if(!r)throw Error("Get migrate bucket approval error");let n={bucketName:r.bucket_name,operator:r.operator,dstPrimarySpId:r.dst_primary_sp_id,dstPrimarySpApproval:{expiredHeight:C.Z.fromString(r.dst_primary_sp_approval.expired_height),globalVirtualGroupFamilyId:r.dst_primary_sp_approval.global_virtual_group_family_id,sig:(0,Q.bytesFromBase64)(r.dst_primary_sp_approval.sig)}};return await this.migrateBucketTx(n,r)}async cancelMigrateBucket(e){return await this.txClient.tx("/greenfield.storage.MsgCancelMigrateBucket",e.operator,a_,D.MsgCancelMigrateBucket.toSDK(e),D.MsgCancelMigrateBucket.encode(e).finish())}async migrateBucketTx(e,t){return await this.txClient.tx(rt,e.operator,rM,{...t,type:rt,primary_sp_approval:{expired_height:t.dst_primary_sp_approval.expired_height,global_virtual_group_family_id:t.dst_primary_sp_approval.global_virtual_group_family_id,sig:t.dst_primary_sp_approval.sig}},D.MsgMigrateBucket.encode(e).finish())}async getBucketMeta(e){let{bucketName:t}=e;i2(t);let r=e.endpoint;r||(r=await this.sp.getSPUrlByBucket(t));let{url:n}=iz(r,e),i=await this.spClient.callApi(n,{method:"GET"}),a=await i.text(),s=await i$(a);return{code:0,message:"get bucket meta success.",statusCode:i.status,body:s}}async listBucketReadRecords(e,t){try{rz(t);let{bucketName:r}=e,n=e.endpoint;n||(n=await this.sp.getSPUrlByBucket(r)),i6(n);let{url:i,optionsWithOutHeaders:a,reqMeta:s}=ap(n,e),o=await this.spClient.signHeaders(s,t),l=await this.spClient.callApi(i,{...a,headers:o},3e3,{code:-1,message:"Get Bucket Quota error."}),u=await l.text(),c=await ad(u);return{code:0,body:c,message:"success",statusCode:l.status}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async listBucketsByIds(e){try{let{ids:t}=e,r=await this.sp.getInServiceSP(),{url:n}=ag(r.endpoint,{ids:t}),i=await this.spClient.callApi(n,{headers:{},method:"GET"},3e3),{status:a}=i;if(!i.ok){let e=await i.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"error",statusCode:a}}let s=await i.text(),o=await ay(s);return{code:0,message:"success",statusCode:a,body:o}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async listBucketsByPaymentAccount(e){try{let t=await this.sp.getInServiceSP(),{url:r}=ah(t.endpoint,e),n=await this.spClient.callApi(r,{headers:{},method:"GET"}),i=await n.text(),a=am(i);return{code:0,message:"Get bucket success.",statusCode:n.status,body:a}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}};ak=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eB(1,(0,n.f3)((0,n.gw)(()=>aG))),eB(2,(0,n.f3)((0,n.gw)(()=>aO))),eB(3,(0,n.f3)((0,n.gw)(()=>aP))),eA("design:paramtypes",[rl,aG,aO,aP])],ak);let aU=class{constructor(e){this.txClient=e,this.queryClient=n.nC.resolve(t7)}async submitChallenge(e,t){return await this.txClient.tx("/greenfield.challenge.MsgSubmit",e,rm,F.MsgSubmit.toSDK(t),F.MsgSubmit.encode(t).finish())}async attestChallenge(e,t){return await this.txClient.tx("/greenfield.challenge.MsgAttest",e,rh,F.MsgAttest.toSDK(t),F.MsgAttest.encode(t).finish())}async latestAttestedChallenges(){let e=await this.queryClient.getChallengeQueryClient();return await e.LatestAttestedChallenges()}async inturnAttestationSubmitter(){let e=await this.queryClient.getChallengeQueryClient();return await e.InturnAttestationSubmitter()}async params(){let e=await this.queryClient.getChallengeQueryClient();return await e.Params()}};aU=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],aU);let aL={Msg1:[{name:"type",type:"string"},{name:"from_address",type:"string"},{name:"src_chain_id",type:"uint32"},{name:"dest_chain_id",type:"uint32"},{name:"sequence",type:"uint64"},{name:"timestamp",type:"uint64"}]},aN=class{constructor(e){this.txClient=e,this.queryClient=n.nC.resolve(t7)}async transferOut(e){return await this.txClient.tx("/greenfield.bridge.MsgTransferOut",e.from,ry,$.MsgTransferOut.toSDK(e),$.MsgTransferOut.encode(e).finish())}async claims(e){return await this.txClient.tx("/cosmos.oracle.v1.MsgClaim",e.fromAddress,aL,z.MsgClaim.toSDK(e),z.MsgClaim.encode(e).finish())}async getChannelSendSequence(e){let t=await this.queryClient.getCrosschainQueryClient();return await t.SendSequence(e)}async getChannelReceiveSequence(e){let t=await this.queryClient.getCrosschainQueryClient();return await t.ReceiveSequence(e)}async getInturnRelayer(e){let t=await this.queryClient.getOracleQueryClient();return await t.InturnRelayer(e)}async getCrosschainPackage(e){let t=await this.queryClient.getCrosschainQueryClient();return await t.CrossChainPackage(e)}async mirrorGroup(e){return await this.txClient.tx("/greenfield.storage.MsgMirrorGroup",e.operator,rP,D.MsgMirrorGroup.toSDK(e),D.MsgMirrorGroup.encode(e).finish())}async mirrorBucket(e){return await this.txClient.tx("/greenfield.storage.MsgMirrorBucket",e.operator,rR,D.MsgMirrorBucket.toSDK(e),D.MsgMirrorBucket.encode(e).finish())}async mirrorObject(e){return await this.txClient.tx("/greenfield.storage.MsgMirrorObject",e.operator,rG,D.MsgMirrorObject.toSDK(e),D.MsgMirrorObject.encode(e).finish())}async getParams(){let e=await this.queryClient.getBridgeQueryClient();return e.Params()}};aN=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],aN);let aq={Msg1:[{name:"amount",type:"TypeMsg1Amount[]"},{name:"depositor",type:"string"},{name:"type",type:"string"}],TypeMsg1Amount:[{name:"amount",type:"string"},{name:"denom",type:"string"}]},aD={Msg1:[{name:"delegator_address",type:"string"},{name:"type",type:"string"},{name:"withdraw_address",type:"string"}]},aj={Msg1:[{name:"type",type:"string"},{name:"delegator_address",type:"string"},{name:"validator_address",type:"string"}]},aQ={Msg1:[{name:"type",type:"string"},{name:"validator_address",type:"string"}]},aH=class{constructor(e){this.txClient=e}async setWithdrawAddress(e){return await this.txClient.tx("/cosmos.distribution.v1beta1.MsgSetWithdrawAddress",e.delegatorAddress,aD,A.MsgSetWithdrawAddress.toSDK(e),A.MsgSetWithdrawAddress.encode(e).finish())}async withdrawValidatorCommission(e,t){return await this.txClient.tx("/cosmos.distribution.v1beta1.MsgWithdrawValidatorCommission",e,aQ,A.MsgWithdrawValidatorCommission.toSDK(t),A.MsgWithdrawValidatorCommission.encode(t).finish())}async withdrawDelegatorReward(e){return await this.txClient.tx("/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",e.delegatorAddress,aj,A.MsgWithdrawDelegatorReward.toSDK(e),A.MsgWithdrawDelegatorReward.encode(e).finish())}async fundCommunityPoolundComm(e,t){return await this.txClient.tx("/cosmos.distribution.v1beta1.MsgFundCommunityPool",e,aq,A.MsgFundCommunityPool.toSDK(t),A.MsgFundCommunityPool.encode(t).finish())}};aH=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],aH);let aV={Msg1:[{name:"type",type:"string"},{name:"granter",type:"string"},{name:"grantee",type:"string"},{name:"allowance",type:"TypeAny"}],TypeAny:[{name:"type",type:"string"},{name:"value",type:"bytes"}]},aF={Msg1:[{name:"type",type:"string"},{name:"granter",type:"string"},{name:"grantee",type:"string"}]},az=class{constructor(e){this.txClient=e,this.queryClient=n.nC.resolve(t7)}async grantAllowance(e){let{amount:t,denom:r,allowedMessages:n,grantee:i,granter:a,expirationTime:o}=e,l=iW(t,r,o),u=iX(n,l),c=iJ(i,a,u),p=iY(t,r,n,o);return await this.txClient.tx("/cosmos.feegrant.v1beta1.MsgGrantAllowance",a,aV,{...K.MsgGrantAllowance.toSDK(c),allowance:{type:c.allowance?.typeUrl,value:(0,Q.base64FromBytes)((0,s.lE)("0x"+ar(JSON.stringify(p))))}},K.MsgGrantAllowance.encode(c).finish())}async revokeAllowance(e){return await this.txClient.tx("/cosmos.feegrant.v1beta1.MsgRevokeAllowance",e.granter,aF,K.MsgRevokeAllowance.toSDK(e),K.MsgRevokeAllowance.encode(e).finish())}async getAllowence(e){let t=await this.queryClient.getFeeGrantQueryClient();return await t.Allowance(e)}async getAllowences(e){let t=await this.queryClient.getFeeGrantQueryClient();return await t.Allowances(e)}};az=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],az);let a$=class{constructor(){this.queryClient=n.nC.resolve(t7)}async getMsgGasParams(e){let t=await this.queryClient.getGashubClient();return await t.MsgGasParams(e)}async getParams(){let e=await this.queryClient.getGashubClient();return await e.Params()}};a$=ex([(0,n.b2)()],a$);let aK=class{constructor(e,t){this.txClient=e,this.storage=t,this.queryClient=n.nC.resolve(t7)}async createGroup(e){return await this.txClient.tx("/greenfield.storage.MsgCreateGroup",e.creator,rx,D.MsgCreateGroup.toSDK(e),D.MsgCreateGroup.encode(e).finish())}async deleteGroup(e){return await this.txClient.tx("/greenfield.storage.MsgDeleteGroup",e.operator,rE,D.MsgDeleteGroup.toSDK(e),D.MsgDeleteGroup.encode(e).finish())}async updateGroupMember(e){if(""===e.groupName)throw Error("group name is empty");if(0===e.membersToAdd.length&&0===e.membersToDelete.length)throw Error("no update member");return await this.txClient.tx("/greenfield.storage.MsgUpdateGroupMember",e.operator,rD({membersToAdd:e.membersToAdd,membersToDelete:e.membersToDelete}),{...D.MsgUpdateGroupMember.toSDK(e),members_to_add:e.membersToAdd.map(e=>({member:e.member,expiration_time:e.expirationTime&&(0,Q.fromTimestamp)(e.expirationTime)}))},D.MsgUpdateGroupMember.encode(e).finish())}async updateGroupExtra(e){return await this.txClient.tx("/greenfield.storage.MsgUpdateGroupExtra",e.operator,rq,D.MsgUpdateGroupExtra.toSDK(e),D.MsgUpdateGroupExtra.encode(e).finish())}async leaveGroup(e,t){return await this.txClient.tx("/greenfield.storage.MsgLeaveGroup",e,rI,D.MsgLeaveGroup.toSDK(t),D.MsgLeaveGroup.encode(t).finish())}async headGroup(e,t){let r=await this.queryClient.getStorageQueryClient();return await r.HeadGroup({groupName:e,groupOwner:t})}async headGroupMember(e,t,r){let n=await this.queryClient.getStorageQueryClient();return await n.HeadGroupMember({groupName:e,groupOwner:t,member:r})}async headGroupNFT(e){let t=await this.queryClient.getStorageQueryClient();return await t.HeadGroupNFT(e)}async listGroup(e){let t=await this.queryClient.getStorageQueryClient();return await t.ListGroups(e)}async getPolicyOfGroup(e){return await this.storage.getPolicyForGroup(e)}async getBucketPolicyOfGroup(e,t){let r=al(aa(e));return await this.storage.getPolicyForGroup({resource:r,principalGroupId:t.toString()})}async getObjectPolicyOfGroup(e,t,r){let n=al(as(e,t));return await this.storage.getPolicyForGroup({resource:n,principalGroupId:r.toString()})}async putGroupPolicy(e,t,r){let n=al(ao(e,t)),i={...r,resource:n};return this.storage.putPolicy(i)}};aK=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eB(1,(0,n.f3)((0,n.gw)(()=>aO))),eA("design:paramtypes",[rl,aO])],aK);let aZ=async(e,t)=>{let{bucketName:r,objectName:n,contentType:i,body:a,offset:s,complete:o,delegatedOpts:l}=t,u=`/${iN(n)}`,c={offset:String(s),complete:String(o)};l&&(c={...c,delegate:"",payload_size:String(a.size),visibility:l.visibility.toString(),is_update:String(l.isUpdate||!1)});let p=new URL(u,i7(e,r));p=iD(p,c);let d={contentSHA256:ri,method:ra,url:{hostname:p.hostname,query:p.searchParams.toString(),path:u},contentType:i};return{url:p.href,optionsWithOutHeaders:{method:ra,body:a},reqMeta:d}},aW=async(e,t)=>{let{bucketName:r,objectName:n,delegatedOpts:i}=t,a=`/${iN(n)}`,s={};i&&(s={"create-folder":"",payload_size:"0",visibility:i.visibility.toString()});let o=new URL(a,i7(e,r));o=iD(o,s);let l={contentSHA256:ri,method:ra,url:{hostname:o.hostname,query:o.searchParams.toString(),path:a},contentType:""};return{url:o.href,optionsWithOutHeaders:{method:ra},reqMeta:l}},aX=e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e);return r},aJ=(e,t)=>{let{objectName:r,bucketName:n}=t,i=`${iN(r)}`,a=new URL(i,i7(e,n));return{url:(a=iD(a,{"object-meta":""})).href}},aY=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpGetObjectMetaResponse.Object||{};return n&&(n.Removed=iV(n.Removed),n.UpdateAt=Number(n.UpdateAt),n.DeleteAt=Number(n.DeleteAt),n.ObjectInfo=iH(n.ObjectInfo)),r.GfSpGetObjectMetaResponse={...r.GfSpGetObjectMetaResponse,Object:n},r},a0=async(e,t)=>{let{bucketName:r,objectName:n}=t,i=`/${iN(n)}`,a=new URL(i,i7(e,r));a=iD(a,{"upload-context":""});let s={contentSHA256:ri,method:"GET",url:{hostname:new URL(a).hostname,query:a.searchParams.toString(),path:i},contentType:"application/octet-stream"};return{url:a.href,optionsWithOutHeaders:{method:"GET"},reqMeta:s}},a1=e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e);return r.QueryResumeOffset.Offset=Number(r.QueryResumeOffset.Offset),r},a2=async(e,t)=>{let{bucketName:r,objectName:n}=t,i=`/${iN(n)}`,a=new URL(i,i7(e,r));a=iD(a,{"upload-progress":""});let s={contentSHA256:ri,method:"GET",url:{hostname:new URL(a).hostname,query:a.searchParams.toString(),path:i}};return{url:a.href,optionsWithOutHeaders:{method:"GET"},reqMeta:s}},a3=e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e);return r},a4=(e,t)=>{let{actionType:r,bucketName:n,objectName:i,limit:a="10",startAfter:s=""}=t,o=`/${iN(i)}`,l={"object-policies":"null","start-after":s,limit:String(a),"action-type":String((0,N.actionTypeFromJSON)(r))},u=new URL(o,i7(e,n));return{url:(u=iD(u,l)).href}},a8=e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpListObjectPoliciesResponse.Policies||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,PrincipalType:Number(e.ResourceType),ResourceType:Number(e.ResourceType),CreateTimestamp:Number(e.CreateTimestamp),UpdateTimestamp:Number(e.UpdateTimestamp),ExpirationTime:Number(e.ExpirationTime)}))),r.GfSpListObjectPoliciesResponse={Policies:n},r},a5=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpListObjectsByBucketNameResponse.Objects||[];n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>({...e,Removed:iV(e.Removed),UpdateAt:Number(e.UpdateAt),DeleteAt:Number(e.DeleteAt),ObjectInfo:iH(e.ObjectInfo)})));let i=r.GfSpListObjectsByBucketNameResponse.CommonPrefixes||[];return i&&!Array.isArray(i)&&(i=[i]),r.GfSpListObjectsByBucketNameResponse={...r.GfSpListObjectsByBucketNameResponse,Objects:n,CommonPrefixes:i,IsTruncated:iV(r.GfSpListObjectsByBucketNameResponse.IsTruncated)},r},a6=(e,t)=>{let r={ids:t.ids.join(","),"objects-query":"null"},n=new URL("",e);return{url:(n=iD(n,r)).href}},a7=async e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpListObjectsByIDsResponse.ObjectEntry;return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>{let t=e.Value;return t&&(t={...e.Value,ObjectInfo:iH(e.Value.ObjectInfo),Removed:iV(e.Value.Removed),UpdateAt:Number(e.Value.UpdateAt),DeleteAt:Number(e.Value.DeleteAt)}),{...e,Id:Number(e.Id),Value:t}})),r.GfSpListObjectsByIDsResponse={...r.GfSpListObjectsByIDsResponse,ObjectEntry:n},r},a9=class{constructor(e,t,r){this.txClient=e,this.storage=t,this.sp=r,this.queryClient=n.nC.resolve(t7),this.spClient=n.nC.resolve(aB)}async createObject(e){i2(e.bucketName),i8(e.objectName),ae(e.objectName),rV(e.creator,"empty creator address");let t={...e,primarySpApproval:{globalVirtualGroupFamilyId:0,expiredHeight:C.Z.fromInt(0),sig:Uint8Array.from([])}};return await this.txClient.tx("/greenfield.storage.MsgCreateObject",e.creator,rB,{...D.MsgCreateObject.toSDK(t),primary_sp_approval:{expired_height:"0",global_virtual_group_family_id:0},expect_checksums:t.expectChecksums.map(e=>(0,Q.base64FromBytes)(e)),payload_size:t.payloadSize.toNumber()},D.MsgCreateObject.encode(t).finish())}async delegateUploadObject(e,t){let{bucketName:r,objectName:n,body:i,resumableOpts:a,timeout:s=3e4,delegatedOpts:o,onProgress:l}=e;rz(t),i2(r),i8(n);let u=a?.disableResumable??!0,c=a?.partSize??33554432,p=e.endpoint;p||(p=await this.sp.getSPUrlByBucket(r));let{params:d}=await this.storage.params(),g=d.versionedParams.maxSegmentSize.toNumber();if(c%g!=0)throw Error("partSize should be an integer multiple of the segment size: "+g);return i.size<=c||u?this.putObject({endpoint:p,bucketName:r,objectName:n,body:i,authType:t,delegatedOpts:o,duration:s,txnHash:"",onProgress:l}):await this.putResumableObject(p,r,n,i,c,t,s,o)}async uploadObject(e,t){let{bucketName:r,objectName:n,body:i,duration:a=3e4,resumableOpts:s,onProgress:o}=e;rz(t),i2(r),i8(n);let l=e.endpoint;l||(l=await this.sp.getSPUrlByBucket(r));let u=e.txnHash;if(!u){let{body:e}=await this.getObjectMeta({bucketName:r,objectName:n,endpoint:l});u=e.GfSpGetObjectMetaResponse.Object.CreateTxHash}let{params:c}=await this.storage.params(),p=c.versionedParams.maxSegmentSize.toNumber(),d=s?.disableResumable??!0,g=s?.partSize??33554432;if(g%p!=0)throw Error("partSize should be an integer multiple of the segment size: "+p);return i.size<=g||d?this.putObject({endpoint:l,bucketName:r,objectName:n,body:i,txnHash:u,authType:t,duration:a,onProgress:o}):await this.putResumableObject(l,r,n,i,g,t,a)}async putObject(e){let{authType:t,body:r,bucketName:n,delegatedOpts:i,duration:a,endpoint:s,objectName:o,txnHash:l,onProgress:u}=e,{reqMeta:c,optionsWithOutHeaders:p,url:d,file:g}=await ax(s,{bucketName:n,objectName:o,contentType:r.type,txnHash:l,body:r,delegatedOpts:i}),y=await this.spClient.signHeaders(c,t);try{let e=await this.spClient.upload(d,{...p,headers:y},a,g,{onProgress:u}),{status:t}=e;return{code:0,message:"Put object success.",statusCode:t}}catch(e){return{code:e.code||-1,message:e.message,statusCode:e?.statusCode||404}}}splitPartInfo(e,t){let r=Math.ceil(e/t);return{totalPartsCount:r,partSize:t,lastPartSize:e-(r-1)*t}}async putResumableObject(e,t,r,n,i,a,s,o){let l=0;if(!o){let e=await this.headSPObjectInfo(t,r,a);if(!e)throw Error("Object does not exist");l=await this.getObjectResumableUploadOffset(t,r,a)}let{totalPartsCount:u}=this.splitPartInfo(n.size,i),c=r$(n)?n.content:n,p=[];for(let e=0;e<u;e++){let t=e*i,r=Math.min(t+i,n.size),a=c.slice(t,r);p.push(a)}let d=l/i;for(;d<u;){let l=new File([p[d]],""),{reqMeta:c,optionsWithOutHeaders:g,url:y}=await aZ(e,{bucketName:t,objectName:r,contentType:n.type,body:l,offset:d*i,complete:d===u-1,delegatedOpts:o}),h=await this.spClient.signHeaders(c,a);try{await this.spClient.callApi(y,{...g,headers:h},s)}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}finally{d++}}return{code:0,message:"Put all object parts success.",statusCode:200}}async headSPObjectInfo(e,t,r){let{code:n}=await this.getObjectStatusFromSp(e,t,r);return 0===n}async getObjectResumableUploadOffset(e,t,r){let{objectInfo:n}=await this.headObject(e,t);if(!n)throw Error("Object not found");if(n.objectStatus==q.ObjectStatus.OBJECT_STATUS_CREATED){let{code:n,body:i}=await this.getObjectOffsetFromSP(e,t,r);if(i)return i.QueryResumeOffset.Offset}return 0}async getObjectOffsetFromSP(e,t,r){let n=await this.sp.getSPUrlByBucket(e),{url:i,optionsWithOutHeaders:a,reqMeta:s}=await a0(n,{bucketName:e,objectName:t}),o=await this.spClient.signHeaders(s,r);try{let e=await this.spClient.callApi(i,{...a,headers:o},5e3),{status:t}=e;if(!e.ok){let r=await e.text(),{code:n,message:i}=await af(r);return{code:n||-1,message:i||"error",statusCode:t,body:{QueryResumeOffset:{Offset:0}}}}let r=await e.text(),n=a1(r);return{code:0,message:"get upload offset success",statusCode:t,body:n}}catch(t){let e=t.message;if(e.includes("no uploading record"))return{code:-1,message:e,statusCode:t.code,body:{QueryResumeOffset:{Offset:0}}};return{code:-1,message:t.message,statusCode:t?.statusCode||404}}}async getObjectStatusFromSp(e,t,r){let n=await this.sp.getSPUrlByBucket(e),{url:i,optionsWithOutHeaders:a,reqMeta:s}=await a2(n,{bucketName:e,objectName:t}),o=await this.spClient.signHeaders(s,r);try{let e=await this.spClient.callApi(i,{...a,headers:o},5e3),{status:t}=e;if(!e.ok){let r=await e.text(),{code:n,message:i}=await af(r);throw{code:n||-1,message:i||"error",statusCode:t}}let r=await e.text(),n=a3(r);return{code:0,message:"success",statusCode:t,body:n}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async cancelCreateObject(e){return await this.txClient.tx("/greenfield.storage.MsgCancelCreateObject",e.operator,rC,D.MsgCancelCreateObject.toSDK(e),D.MsgCancelCreateObject.encode(e).finish())}async deleteObject(e){return await this.txClient.tx("/greenfield.storage.MsgDeleteObject",e.operator,rv,D.MsgDeleteObject.toSDK(e),D.MsgDeleteObject.encode(e).finish())}async updateObjectInfo(e){return await this.txClient.tx("/greenfield.storage.MsgUpdateObjectInfo",e.operator,rQ,D.MsgUpdateObjectInfo.toSDK(e),D.MsgUpdateObjectInfo.encode(e).finish())}async headObject(e,t){let r=await this.queryClient.getStorageQueryClient();return r.HeadObject({bucketName:e,objectName:t})}async headObjectById(e){let t=await this.queryClient.getStorageQueryClient();return t.HeadObjectById({objectId:e})}async headObjectNFT(e){let t=await this.queryClient.getStorageQueryClient();return await t.HeadObjectNFT(e)}async getObject(e,t){try{rz(t);let{bucketName:r,objectName:n,duration:i=3e4}=e;i2(r),i8(n);let a=e.endpoint;a||(a=await this.sp.getSPUrlByBucket(r));let{reqMeta:s,optionsWithOutHeaders:o,url:l}=await aS(a,{bucketName:r,objectName:n}),u=await this.spClient.signHeaders(s,t),c=await this.spClient.callApi(l,{...o,headers:u},i),{status:p}=c;if(!c.ok){let e=await c.text(),{code:t,message:r}=await af(e);return{code:t||-1,message:r||"Get object error.",statusCode:p}}let d=await c.blob();return{code:0,body:d,message:"Get object success.",statusCode:p}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async getObjectPreviewUrl(e,t){if(rz(t),"ECDSA"===t.type)throw Error("Get object preview url only support EDDSA");let{bucketName:r,objectName:n,queryMap:i}=e;i2(r),i8(n);let a=e.endpoint;a||(a=await this.sp.getSPUrlByBucket(r));let o="/"+iN(n),l=i7(a,r)+o,u="";"EDDSA"===t.type&&(u=(0,s.Dv)(n8.getPublicKey(t.seed.slice(2))));let c=iq({...i,[i_]:u.slice(2)}),p=["GET",`/${iN(n)}`,c,new URL(l).host,"\n"].join("\n"),d=iA(p,t);return`${l}?Authorization=${encodeURIComponent(d)}&${c}`}async downloadFile(e,t){try{let{objectName:r}=e,n=await this.getObject(e,t);if(0!==n.code)throw Error(n.message);let i=n?.body;if(i){let e=URL.createObjectURL(i),t=document.createElement("a");t.href=e,t.download=r,t.click()}return}catch(e){throw Error(e)}}async listObjects(e){try{let{bucketName:t,endpoint:r,duration:n=3e4,query:i=new URLSearchParams}=e;i2(t),i6(r);let a=`${i7(r,t)}?${i?.toString()}`,s=new H.Headers,o=await this.spClient.callApi(a,{headers:s,method:"GET"},n),{status:l}=o;if(!o.ok){let e=await o.text(),{code:t,message:r}=await af(e);return{code:t||-1,message:r||"List object error.",statusCode:l}}let u=await o.text(),c=await a5(u);return{code:0,message:"List object success.",statusCode:l,body:c}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async createFolder(e){if(!e.objectName.endsWith("/"))throw Error("failed to create folder. Folder names must end with a forward slash (/) character");let t={...e,payloadSize:C.Z.fromInt(0),contentType:"text/plain",expectChecksums:["47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="].map(e=>(0,Q.bytesFromBase64)(e))};return this.createObject(t)}async delegateCreateFolder(e,t){let{bucketName:r,objectName:n,delegatedOpts:i,timeout:a=1e4}=e,s=e.endpoint;s||(s=await this.sp.getSPUrlByBucket(r));let{reqMeta:o,optionsWithOutHeaders:l,url:u}=await aW(s,{bucketName:r,objectName:n,delegatedOpts:i}),c=await this.spClient.signHeaders(o,t);try{let e=await this.spClient.callApiV2(u,{...l,headers:c},a),{status:t}=e,r=e.text,n=aX(r);return{code:0,message:"Create folder success.",statusCode:t,body:n}}catch(e){return{code:e.code||-1,message:e.message,statusCode:e?.statusCode||404}}}async putObjectPolicy(e,t,r){let n=al(as(e,t)),i={...r,resource:n};return await this.storage.putPolicy(i)}async isObjectPermissionAllowed(e,t,r,n){let i=await this.queryClient.getStorageQueryClient();return await i.VerifyPermission({bucketName:e,objectName:t,actionType:r,operator:n})}async getObjectPolicy(e,t,r){let n=await this.queryClient.getStorageQueryClient(),i=al(as(e,t));return await n.QueryPolicyForAccount({resource:i,principalAddress:r})}async deleteObjectPolicy(e,t,r,n,i){let a=al(as(t,r)),s={type:(0,N.principalTypeFromJSON)(i),value:n};return await this.storage.deletePolicy({resource:a,principal:s,operator:e})}async getObjectMeta(e){let{bucketName:t,objectName:r,endpoint:n}=e;i2(t),i8(r);let{url:i}=aJ(n,e),a=await this.spClient.callApi(i,{method:"GET"}),s=await a.text(),o=await aY(s);return{code:0,message:"get object meta success.",statusCode:a.status,body:o}}async listObjectsByIds(e){try{let t=await this.sp.getInServiceSP(),{url:r}=a6(t.endpoint,e),n=await this.spClient.callApi(r,{headers:{},method:"GET"},3e3),{status:i}=n;if(!n.ok){let e=await n.text(),{code:t,message:r}=await af(e);throw{code:t||-1,message:r||"error",statusCode:i}}let a=await n.text(),s=await a7(a);return{code:0,message:"success",statusCode:i,body:s}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}async listObjectPolicies(e){let t=e.endpoint;t||(t=await this.sp.getSPUrlByBucket(e.bucketName));let{url:r}=a4(t,e),n=await this.spClient.callApi(r,{headers:{},method:"GET"}),i=await n.text(),a=a8(i);return{code:0,message:"success",statusCode:n.status,body:a}}async getObjectUploadProgress(e,t,r){let{objectInfo:n}=await this.headObject(e,t);if(!n)throw Error("object not exist");if(n.objectStatus==q.ObjectStatus.OBJECT_STATUS_CREATED){let{body:n,message:i}=await this.getObjectStatusFromSp(e,t,r);if(!n)throw Error("fail to fetch object uploading progress from sp "+i);return n.QueryUploadProgress.ProgressDescription}return n.objectStatus.toString()}};a9=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eB(1,(0,n.f3)((0,n.gw)(()=>aO))),eB(2,(0,n.f3)((0,n.gw)(()=>aG))),eA("design:paramtypes",[rl,aO,aG])],a9);let se=async({address:e,domain:t,sp:r,pubKey:n,expireDate:i,authorization:a})=>{let s=`${r.endpoint}/auth/update_key_v2`,o=new H.Headers({"X-Gnfd-User-Address":e,"X-Gnfd-App-Domain":t,"X-Gnfd-App-Reg-Public-Key":n,"X-Gnfd-Expiry-Timestamp":i,Authorization:a});try{if(!(await aC(s,{headers:o,method:"POST"})).ok)return{code:-1,data:{address:e},message:"upload sp pubKey error."}}catch(t){return{code:-1,data:{address:e},message:"upload sp pubKey error."}}return{code:0,data:{...r}}},st=(e,t)=>new Promise(r=>setTimeout(()=>r(t),e)),sr=async({address:e,sps:t,domain:r,pubKey:n,expireDate:i,authorization:a})=>Promise.all(t.map(t=>Promise.race([se({address:e,domain:r,sp:t,pubKey:n,expireDate:i,authorization:a}),st(3e3,{code:-1,data:{address:e}})]))),sn=({domain:e,address:t,pubKey:r,chainId:n,issuedDate:i,expireDate:a})=>`${e} wants you to sign in with your BNB Greenfield account:${t}
Register your identity public key ${r}
URI: ${e}
Version: 1
Chain ID: ${n}
Issued At: ${i}
Expiration Time: ${a}
`,si=async({message:e,address:t,provider:r})=>{let n=await r.request({method:"personal_sign",params:[e,t]});return n},sa=class{async genOffChainAuthKeyPairAndUpload({sps:e,address:t,domain:r,expirationMs:n,chainId:i},a){try{let{privateKey:o,publicKey:l}=this.generateKeys(),u=au(),c=u+n,p=ac(u),d=ac(c),g=sn({domain:r,address:t,pubKey:(0,s.Dv)(l).slice(2),chainId:i,issuedDate:p,expireDate:d}),y=await si({message:g,address:t,provider:a}),h=JSON.stringify(g).replace(/\"/g,""),m=`GNFD1-ETH-PERSONAL_SIGN,SignedMsg=${h},Signature=${y}`,f=await sr({address:t,sps:e,domain:r,pubKey:(0,s.Dv)(l).slice(2),expireDate:d,authorization:m}),w=f.filter(e=>0!==e.code).map(e=>e.data.address);if(w.length===e.length)throw Error("No SP service is available. Please try again later.");let b=[];return f.forEach(e=>{0===e.code&&b.push(e.data.address)}),{code:0,body:{seedString:(0,s.Dv)(o),keypairs:{privateKey:(0,s.Dv)(o).slice(2),publicKey:(0,s.Dv)(l).slice(2)},expirationTime:c,spAddresses:b,failedSpAddresses:w},message:"Sign and upload public key success"}}catch(e){return{code:-1,message:e.message,statusCode:e?.status||404}}}generateKeys(){let e=n8.utils.randomPrivateKey(),t=n8.getPublicKey(e);return{privateKey:e,publicKey:t}}};sa=ex([(0,n.b2)()],sa);let ss=(e,t)=>{let r={"user-payments":"null"},n=iq(r),i=new URL("/",e);i=iD(i,r);let a={contentSHA256:ri,method:"GET",url:{hostname:new URL(i).hostname,query:n,path:"/"},userAddress:t.account};return{url:i.href,optionsWithOutHeaders:{method:"GET"},reqMeta:a}},so=e=>{let t=new Y.XMLParser({parseTagValue:!1}),r=t.parse(e),n=r.GfSpListUserPaymentAccountsResponse.PaymentAccounts||[];return n&&(Array.isArray(n)||(n=[n]),n=n.map(e=>(e.PaymentAccount={...e.PaymentAccount,Refundable:iV(e.PaymentAccount.Refundable),UpdateAt:Number(e.PaymentAccount.UpdateAt),UpdateTime:Number(e.PaymentAccount.UpdateTime)},e))),r.GfSpListUserPaymentAccountsResponse.PaymentAccounts=n,r},sl=class{constructor(e,t){this.txClient=e,this.sp=t,this.spClient=n.nC.resolve(aB),this.queryClient=n.nC.resolve(t7)}async getStreamRecord(e){let t=await this.queryClient.getPaymentQueryClient();return await t.StreamRecord({account:e})}async getStreamRecordAll(e){let t=await this.queryClient.getPaymentQueryClient();return await t.StreamRecords(e)}async params(){let e=await this.queryClient.getPaymentQueryClient();return await e.Params()}async paramsByTimestamp(e){let t=await this.queryClient.getPaymentQueryClient();return await t.ParamsByTimestamp(e)}async getPaymentAccountCount(e){let t=await this.queryClient.getPaymentQueryClient();return await t.PaymentAccountCount(e)}async getPaymentAccountCounts(e){let t=await this.queryClient.getPaymentQueryClient();return await t.PaymentAccountCounts(e)}async paymentAccount(e){let t=await this.queryClient.getPaymentQueryClient();return await t.PaymentAccount(e)}async paymentAccountAll(e){let t=await this.queryClient.getPaymentQueryClient();return await t.PaymentAccounts(e)}async dynamicBalance(e){let t=await this.queryClient.getPaymentQueryClient();return await t.DynamicBalance(e)}async getPaymentAccountsByOwner(e){let t=await this.queryClient.getPaymentQueryClient();return await t.PaymentAccountsByOwner(e)}async getAutoSettleRecords(e){let t=await this.queryClient.getPaymentQueryClient();return await t.AutoSettleRecords(e)}async getOutFlows(e){let t=await this.queryClient.getPaymentQueryClient();return await t.OutFlows(e)}async deposit(e){return await this.txClient.tx("/greenfield.payment.MsgDeposit",e.creator,rf,W.MsgDeposit.toSDK(e),W.MsgDeposit.encode(e).finish())}async withdraw(e){return await this.txClient.tx("/greenfield.payment.MsgWithdraw",e.creator,rb,W.MsgWithdraw.toSDK(e),W.MsgWithdraw.encode(e).finish())}async disableRefund(e){return await this.txClient.tx("/greenfield.payment.MsgDisableRefund",e.owner,rw,W.MsgDisableRefund.toSDK(e),W.MsgDisableRefund.encode(e).finish())}async listUserPaymentAccounts(e,t,r){try{rz(t);let n="";if(r&&r.endpoint)n=r.endpoint;else{let e=await this.sp.getInServiceSP();n=e.endpoint}let{url:i,optionsWithOutHeaders:a,reqMeta:s}=ss(n,e),o=await this.spClient.signHeaders(s,t),l=await this.spClient.callApi(i,{...a,headers:o}),u=await l.text(),c=so(u);return{code:0,message:"Get bucket success.",statusCode:l.status,body:c}}catch(e){return{code:-1,message:e.message,statusCode:e?.statusCode||404}}}};sl=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eB(1,(0,n.f3)((0,n.gw)(()=>aG))),eA("design:paramtypes",[rl,aG])],sl);let su={Msg1:[{name:"initial_deposit",type:"TypeMsg1InitialDeposit[]"},{name:"messages",type:"TypeAny[]"},{name:"metadata",type:"string"},{name:"proposer",type:"string"},{name:"summary",type:"string"},{name:"title",type:"string"},{name:"type",type:"string"}],TypeMsg1InitialDeposit:[{name:"amount",type:"string"},{name:"denom",type:"string"}],TypeAny:[{name:"type",type:"string"},{name:"value",type:"bytes"}]},sc={Msg1:[{name:"metadata",type:"string"},{name:"option",type:"string"},{name:"proposal_id",type:"uint64"},{name:"type",type:"string"},{name:"voter",type:"string"}]},sp=class{constructor(e){this.txClient=e}async voteProposal(e){return await this.txClient.tx("/cosmos.gov.v1.MsgVote",e.voter,sc,{...J.MsgVote.toSDK(e),option:(0,X.voteOptionToJSON)(e.option),proposal_id:e.proposalId.toNumber()},J.MsgVote.encode(e).finish())}async submitProposal(e,t){return await this.txClient.tx("/cosmos.gov.v1.MsgSubmitProposal",t.proposer,su,{...J.MsgSubmitProposal.toSDK(t),messages:[{type:"/cosmos.staking.v1beta1.MsgCreateValidator",value:ar(JSON.stringify(e))}]},J.MsgSubmitProposal.encode(t).finish())}};sp=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],sp);let sd={Msg1:[{name:"bls_key",type:"string"},{name:"bls_proof",type:"string"},{name:"challenger_address",type:"string"},{name:"commission",type:"TypeMsg1Commission"},{name:"delegator_address",type:"string"},{name:"description",type:"TypeMsg1Description"},{name:"from",type:"string"},{name:"min_self_delegation",type:"string"},{name:"pubkey",type:"TypeAny"},{name:"relayer_address",type:"string"},{name:"type",type:"string"},{name:"validator_address",type:"string"},{name:"value",type:"TypeMsg1Value"}],TypeMsg1Commission:[{name:"max_change_rate",type:"string"},{name:"max_rate",type:"string"},{name:"rate",type:"string"}],TypeMsg1Description:[{name:"details",type:"string"},{name:"identity",type:"string"},{name:"moniker",type:"string"},{name:"security_contact",type:"string"},{name:"website",type:"string"}],TypeMsg1Value:[{name:"amount",type:"string"},{name:"denom",type:"string"}],TypeAny:[{name:"type",type:"string"},{name:"value",type:"bytes"}]},sg={Msg1:[{name:"bls_key",type:"string"},{name:"bls_proof",type:"string"},{name:"challenger_address",type:"string"},{name:"commission_rate",type:"string"},{name:"description",type:"TypeMsg1Description"},{name:"min_self_delegation",type:"string"},{name:"relayer_address",type:"string"},{name:"type",type:"string"},{name:"validator_address",type:"string"}],TypeMsg1Description:[{name:"details",type:"string"},{name:"identity",type:"string"},{name:"moniker",type:"string"},{name:"security_contact",type:"string"},{name:"website",type:"string"}]},sy=class{constructor(e){this.txClient=e,this.queryClient=n.nC.resolve(t7),this.proposal=n.nC.resolve(sp)}async listValidators(e){let t=await this.queryClient.getStakingClient();return t.Validators(e)}async createValidator(e,t){return await this.txClient.tx("/cosmos.staking.v1beta1.MsgCreateValidator",e,sd,en.MsgCreateValidator.toSDK(t),en.MsgCreateValidator.encode(t).finish())}async editValidator(e,t){return await this.txClient.tx("/cosmos.staking.v1beta1.MsgEditValidator",e,sg,en.MsgEditValidator.toSDK(t),en.MsgEditValidator.encode(t).finish())}};sy=ex([(0,n.b2)(),eB(0,(0,n.f3)((0,n.gw)(()=>rl))),eA("design:paramtypes",[rl])],sy);class sh{static create(e,t){n.nC.register("RPC_URL",{useValue:e}),n.nC.register("CHAIN_ID",{useValue:t});let r=n.nC.resolve(rd),i=n.nC.resolve(rg),a=n.nC.resolve(ak),s=n.nC.resolve(aU),o=n.nC.resolve(aN),l=n.nC.resolve(aH),u=n.nC.resolve(az),c=n.nC.resolve(a$),p=n.nC.resolve(aK),d=n.nC.resolve(a9),g=n.nC.resolve(sl),y=n.nC.resolve(sp),h=n.nC.resolve(t7),m=n.nC.resolve(aG),f=n.nC.resolve(aB),w=n.nC.resolve(aO),b=n.nC.resolve(rl),C=n.nC.resolve(sa),S=n.nC.resolve(sy),x=n.nC.resolve(aP);return new sh(r,i,a,s,o,l,u,c,p,d,g,y,h,m,f,w,b,C,S,x)}constructor(e,t,r,n,i,a,s,o,l,u,c,p,d,g,y,h,m,f,w,b){this.account=e,this.basic=t,this.bucket=r,this.challenge=n,this.crosschain=i,this.distribution=a,this.feegrant=s,this.gashub=o,this.group=l,this.object=u,this.payment=c,this.proposal=p,this.queryClient=d,this.sp=g,this.spClient=y,this.storage=h,this.txClient=m,this.offchainauth=f,this.validator=w,this.virtualGroup=b}}}}]);