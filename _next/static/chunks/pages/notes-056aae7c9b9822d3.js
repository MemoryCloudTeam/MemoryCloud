(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7397],{33477:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes",function(){return a(14695)}])},50043:function(e,t,a){"use strict";a.d(t,{Db:function(){return l},Lp:function(){return o},wz:function(){return i}});var n=a(95740),s=a(53539);let o=s.Client.create(n.DW,String(n.pF)),r=async()=>{let e=await o.sp.getStorageProviders(),t=(null!=e?e:[]).filter(e=>e.endpoint.includes("nodereal"));return t},l=async()=>{let e=await r();return e.map(e=>{var t;return{address:e.operatorAddress,endpoint:e.endpoint,name:null===(t=e.description)||void 0===t?void 0:t.moniker}})},i=async()=>{var e;let t=await r(),a=Math.floor(Math.random()*t.length),n=[...t.slice(0,a),...t.slice(a+1)].map(e=>e.operatorAddress),s={id:t[a].id,endpoint:t[a].endpoint,primarySpAddress:null===(e=t[a])||void 0===e?void 0:e.operatorAddress,sealAddress:t[a].sealAddress,secondarySpAddresses:n};return s}},11768:function(e,t,a){"use strict";a.d(t,{t:function(){return s}});var n=a(67294);let s=()=>{let[e,t]=n.useState(!1);return n.useEffect(()=>t(!0),[]),e}},14695:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var n=a(85893),s=a(56387),o=a(9008),r=a.n(o),l=a(96068),i=a(80366),c=a(50043),d=a(95740),u=a(26558),m=a(53539),f=a(67294),x=a(38793),g=a(91895),h=a(11768),p=a(13692);let b={zh:{noteTotal:"笔记总数",newNote:"新建笔记",searchPlaceholder:"搜索笔记...",noNotes:"暂无笔记",selectNote:"请选择左侧笔记查看详情",edit:"编辑",save:"保存",cancel:"取消",noContent:"暂无内容",reviewRecords:"复习记录",reviewTotal:"总次数",reviewTime:"复习时间",reviewScore:"记忆程度",memoryBefore:"记忆前思考",memoryAfter:"记忆后感悟",noReview:"暂无复习记录",addNote:"添加笔记",enterNoteName:"请输入笔记名",enterContent:"请输入内容",saving:"保存中...",savedSuccess:"保存成功",contentUnchanged:"内容未变化，无需保存",noBalance:"Greenfield 链 BNB 余额不足，可以从 BSC 链跨到 Greenfield 链，价值1U左右的BNB就足够。",goBridge:"前往跨链桥",alertNoOffchain:"未检测到离线授权，请先创建授权对",alertSuccess:"成功",createNoteFail:"内容创建失败",addNoteFail:"添加笔记失败",noteNameExists:"笔记名称已存在",creatingNote:"正在创建...",createdSuccess:"创建成功",contentEmpty:"内容不能为空",createBucket:"创建存储空间",bucketNotExist:"未检测到存储空间，请先创建 Greenfield 存储空间"},en:{noteTotal:"Notes Total",newNote:"New Note",searchPlaceholder:"Search notes...",noNotes:"No notes",selectNote:"Please select a note on the left to view details",edit:"Edit",save:"Save",cancel:"Cancel",noContent:"No content",reviewRecords:"Review Records",reviewTotal:"Total",reviewTime:"Review Time",reviewScore:"Memory Score",memoryBefore:"Thinking Before Review",memoryAfter:"Reflection After Review",noReview:"No review records",addNote:"Add Note",enterNoteName:"Enter note name",enterContent:"Enter content",saving:"Saving...",savedSuccess:"Saved successfully",contentUnchanged:"No changes, no need to save",noBalance:"Insufficient BNB on Greenfield. You can bridge about $1 worth of BNB from BSC to Greenfield.",goBridge:"Go to Bridge",alertNoOffchain:"No offchain, please create offchain pairs first",alertSuccess:"Success",createNoteFail:"Failed to create note",addNoteFail:"Failed to add note",noteNameExists:"Note name already exists",creatingNote:"Creating...",createdSuccess:"Created successfully",contentEmpty:"Content cannot be empty",createBucket:"Create Storage Space",bucketNotExist:"No storage space detected, please create a Greenfield bucket first."}};function v(){return(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:60},children:[(0,n.jsx)("div",{style:{width:36,height:36,border:"4px solid #eee",borderTop:"4px solid #16abff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,n.jsx)("style",{children:"@keyframes spin { 100% { transform: rotate(360deg); } }"})]})}let w=e=>e?"fileList_".concat(e):"",N=e=>{if(!e)return null;let t=localStorage.getItem(w(e));if(!t)return null;try{let{data:a,timestamp:n}=JSON.parse(t);if(Date.now()-n<d.U$)return a;return localStorage.removeItem(w(e)),null}catch(t){return localStorage.removeItem(w(e)),null}},y=(e,t)=>{localStorage.setItem(w(e),JSON.stringify({data:t,timestamp:Date.now()}))},j=e=>{e&&localStorage.removeItem(w(e))},S=()=>{let{lang:e}=(0,s.ZK)(),t=t=>b[e][t],{address:a,connector:o}=(0,x.mA)(),{chain:r}=(0,x.LN)(),[l,i]=(0,f.useState)({bucketName:"",objectName:"",file:null}),[d,w]=(0,f.useState)(null),[S,B]=(0,f.useState)(!1),[O,C]=(0,f.useState)(!1),[k,E]=(0,f.useState)(null),[A,I]=(0,f.useState)(!1),[T,L]=(0,f.useState)({open:!1,message:"",actionText:void 0,onAction:null}),[F,D]=(0,f.useState)([]),[P,R]=(0,f.useState)(!0),[_,G]=(0,f.useState)(!1),[U,M]=(0,f.useState)(""),[z,$]=(0,f.useState)("");(0,f.useRef)(null);let[J,W]=(0,f.useState)(null),[Y,K]=(0,f.useState)(""),[Z,H]=(0,f.useState)(!1),[Q,V]=(0,f.useState)(!1),[X,q]=(0,f.useState)(""),[ee,et]=(0,f.useState)(!1),[ea,en]=(0,f.useState)(!1),[es,eo]=(0,f.useState)(!1),[er,el]=(0,f.useState)([]);(0,h.t)();let[ei,ec]=(0,f.useState)(!1),[ed,eu]=(0,f.useState)(""),[em,ef]=(0,f.useState)(!1),[ex,eg]=(0,f.useState)(!1),[eh,ep]=(0,f.useState)(!1),[eb,ev]=(0,f.useState)(null),ew=r&&"greenfield"===r.network,eN=a?"".concat(a.toLowerCase(),"-memorycloud"):"";(0,f.useEffect)(()=>{a&&ew&&(B(!0),w(null),c.Lp.bucket.headBucket(eN).then(()=>w(!0)).catch(()=>w(!1)).finally(()=>B(!1)))},[a,ew,eN]);let ey=async()=>{if(a){I(!0);try{var e,t;let n=await c.Lp.account.getAccount(a),s=n.accountNumber;E(null!==(t=null==s?void 0:null===(e=s.toString)||void 0===e?void 0:e.call(s))&&void 0!==t?t:String(s))}catch(e){E("0")}I(!1)}};(0,f.useEffect)(()=>{R(!0)},[a,eN]);let ej=async()=>{if(!a||!eN)return;let e=N(a);if(e){D(e),R(!1);return}try{var n,s;let e=await (0,c.wz)(),o=e.endpoint;if(!o){L({open:!0,message:t("createNoteFail")}),R(!1);return}let r=await c.Lp.object.listObjects({bucketName:eN,endpoint:o}),l=(null===(s=r.body)||void 0===s?void 0:null===(n=s.GfSpListObjectsByBucketNameResponse)||void 0===n?void 0:n.Objects)||[];D(l),y(a,l)}catch(e){D([])}finally{R(!1)}};(0,f.useEffect)(()=>{!0===d&&eN&&ej()},[d,eN]);let eS=async()=>{if(await ey(),"0"===k||null===k){L({open:!0,message:eF[e].noBalance,actionText:eF[e].goBridge,onAction:()=>{window.open("https://greenfield.bnbchain.org/en/bridge?type=transfer-in","_blank")},extraBtn:{text:eF[e].refresh,onClick:()=>{window.location.reload()}}});return}C(!0);let n=await (0,c.wz)(),s=await (null==o?void 0:o.getProvider()),r=await (0,u.o)(a,s);if(!r){L({open:!0,message:t("alertNoOffchain")}),C(!1);return}try{let e=await c.Lp.bucket.createBucket({bucketName:eN,creator:a,primarySpAddress:n.primarySpAddress,visibility:m.VisibilityType.VISIBILITY_TYPE_PUBLIC_READ,chargedReadQuota:m.Long.fromString("0"),paymentAddress:a}),s=await e.simulate({denom:"BNB"}),o=await e.broadcast({denom:"BNB",gasLimit:Number(null==s?void 0:s.gasLimit),gasPrice:(null==s?void 0:s.gasPrice)||"5000000000",payer:a,granter:""});0===o.code&&(L({open:!0,message:t("alertSuccess")}),w(!0))}catch(e){e instanceof Error?L({open:!0,message:e.message}):L({open:!0,message:JSON.stringify(e)})}C(!1)},eB=async()=>{if(!z.trim()){L({open:!0,message:t("contentEmpty")});return}ec(!0);try{await (0,c.wz)();let e=await (null==o?void 0:o.getProvider()),n=await (0,u.o)(a,e);if(!n){ec(!1),L({open:!0,message:t("alertNoOffchain")});return}let s=U.trim()+"/",r=F.some(e=>{var t;return(null===(t=e.ObjectInfo)||void 0===t?void 0:t.ObjectName)===s});if(r){ec(!1),L({open:!0,message:t("noteNameExists")});return}let l={type:"EDDSA",seed:n.seedString,domain:window.location.origin,address:a},i=await c.Lp.object.delegateCreateFolder({bucketName:eN,objectName:s,delegatedOpts:{...n,visibility:1}},l);if(!i||0!==i.code){ec(!1),L({open:!0,message:t("createNoteFail")});return}let d=s+"1",m=new TextEncoder,f=m.encode(z),x=new File([f],"1",{type:"text/plain"});await c.Lp.object.delegateUploadObject({bucketName:eN,objectName:d,body:x,delegatedOpts:{visibility:1},onProgress:e=>{}},{type:"EDDSA",address:a,domain:window.location.origin,seed:n.seedString}),j(a),L({open:!0,message:t("createdSuccess")}),ev({folder:s,content:z}),M(""),$(""),V(!1),await ej(),await eE(s)}catch(e){L({open:!0,message:t("addNoteFail")})}finally{ec(!1)}},eO=F.map(e=>{var t;return null===(t=e.ObjectInfo)||void 0===t?void 0:t.ObjectName}).filter(e=>e&&/^(.*)\/$/.test(e)&&e.indexOf("/")===e.length-1&&-1===e.slice(0,-1).indexOf("/")).map(e=>e),eC=eO.map(e=>{var t;let a=F.find(t=>{var a;return(null===(a=t.ObjectInfo)||void 0===a?void 0:a.ObjectName)===e}),n=F.filter(t=>{var a;let n=null===(a=t.ObjectInfo)||void 0===a?void 0:a.ObjectName;return n&&n.startsWith(e)&&/^\d+$/.test(n.slice(e.length))&&-1===n.slice(e.length).indexOf("/")}),s=n.map(e=>{var t;return(null===(t=e.ObjectInfo)||void 0===t?void 0:t.CreateAt)||0}),o=(null==a?void 0:null===(t=a.ObjectInfo)||void 0===t?void 0:t.CreateAt)||0,r=s.length>0?Math.max(...s):o;return{folderName:e,lastEdit:r}}).sort((e,t)=>t.lastEdit-e.lastEdit);function ek(e,t){if(!e)return"";let a=new Date(1e3*e),n=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),r=String(a.getHours()).padStart(2,"0"),l=String(a.getMinutes()).padStart(2,"0"),i=String(a.getSeconds()).padStart(2,"0");return"".concat(n,"-").concat(s,"-").concat(o," ").concat(r,":").concat(l,":").concat(i)}let eE=async e=>{eo(!1),et(!0),H(!0),K(""),el([]),eI(!0);let t=F.map(e=>{var t;return null===(t=e.ObjectInfo)||void 0===t?void 0:t.ObjectName}).filter(t=>t&&t.startsWith(e)&&/^\d+$/.test(t.slice(e.length))&&-1===t.slice(e.length).indexOf("/")).map(e=>e);if(0===t.length){K(""),W(e),H(!1),et(!1),eI(!1);return}let n=Math.max(...t.map(t=>Number(t.slice(e.length)))),s=e+n;try{let t=await (null==o?void 0:o.getProvider()),n=await (0,u.o)(a,t);if(!n){K(""),W(e),H(!1),et(!1),eI(!1);return}let r=await c.Lp.object.getObject({bucketName:eN,objectName:s},{type:"EDDSA",address:a,domain:window.location.origin,seed:n.seedString});if(r&&r.body){let t=await r.body.text();K(t),W(e)}else K(""),W(e)}catch(t){K(""),W(e),eI(!1)}H(!1),et(!1)},[eA,eI]=(0,f.useState)(!1);(0,f.useEffect)(()=>{J&&(eI(!0),el([]),(async()=>{var e,t;let n=await (null==o?void 0:o.getProvider()),s=await (0,u.o)(a,n);if(!s){eI(!1);return}let r=F.filter(e=>{var t;let a=null===(t=e.ObjectInfo)||void 0===t?void 0:t.ObjectName;return"string"==typeof a&&a.startsWith(J+"review/")&&/^\d+_\d+$/.test(a.slice((J+"review/").length))});r.sort((e,t)=>{var a,n;return((null===(a=e.ObjectInfo)||void 0===a?void 0:a.CreateAt)||0)-((null===(n=t.ObjectInfo)||void 0===n?void 0:n.CreateAt)||0)});let l=[];for(let n of r){let o=null===(e=n.ObjectInfo)||void 0===e?void 0:e.ObjectName,r={},i=0;if(o)try{let e=await c.Lp.object.getObject({bucketName:eN,objectName:o},{type:"EDDSA",address:a,domain:window.location.origin,seed:s.seedString});if(e&&e.body){let t=await e.body.text();r=JSON.parse(t)}i=function(e,t){let a=t+"review/";if(!e.startsWith(a))return 0;let n=e.slice(a.length),s=n.split("_");if(2===s.length){let e=parseInt(s[1],10);return isNaN(e)?0:e}return 0}(o,J)}catch(e){}l.push({...r,score:i,time:(null===(t=n.ObjectInfo)||void 0===t?void 0:t.CreateAt)||0})}el(l),eI(!1)})())},[J,F,a,o,eN]),(0,f.useEffect)(()=>{J&&q(Y)},[J]);let eT=async()=>{ep(!0),j(a),W(null),K(""),await ej(),setTimeout(()=>ep(!1),600)},eL=async()=>{if(X.trim()===Y.trim()){eg(!0);return}ec(!0);try{let e=F.map(e=>{var t;return null===(t=e.ObjectInfo)||void 0===t?void 0:t.ObjectName}).filter(e=>e&&e.startsWith(J)&&/^\d+$/.test(e.slice(J.length))&&-1===e.slice(J.length).indexOf("/")).map(e=>e),n=0===e.length?0:Math.max(...e.map(e=>Number(e.slice(J.length)))),s=n+1,r=J+s,l=new TextEncoder,i=l.encode(X),d=new File([i],String(s),{type:"text/plain"}),m=await (null==o?void 0:o.getProvider()),f=await (0,u.o)(a,m);if(!f){ec(!1),L({open:!0,message:t("alertNoOffchain")});return}await c.Lp.object.delegateUploadObject({bucketName:eN,objectName:r,body:d,delegatedOpts:{visibility:1},onProgress:e=>{}},{type:"EDDSA",address:a,domain:window.location.origin,seed:f.seedString}),j(a),await ej(),await eE(J),q(X),K(X),ec(!1),L({open:!0,message:t("savedSuccess")}),setTimeout(()=>{L(e=>({...e,open:!1,message:""}))},1200)}catch(e){ec(!1),L({open:!0,message:t("addNoteFail")})}};(0,f.useEffect)(()=>{en(!0)},[]),(0,f.useEffect)(()=>{a&&ew&&!1===d&&L({open:!0,message:t("bucketNotExist"),actionText:t("createBucket")||"创建存储空间",onAction:eS})},[d,a,ew]),(0,f.useEffect)(()=>{a&&ew&&ey()},[a,ew]);let eF={zh:{noBalance:"Greenfield 链 BNB 余额不足，可以从 BSC 链跨到 Greenfield 链，价值1U左右的BNB就足够。",goBridge:"前往跨链桥",refresh:"刷新"},en:{noBalance:"Insufficient BNB on Greenfield. You can bridge about $1 worth of BNB from BSC to Greenfield.",goBridge:"Go to Bridge",refresh:"Refresh"}};return(0,n.jsxs)("div",{className:"h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex flex-col text-white",children:[(0,n.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-sm border-b border-cyan-500/20 px-6 py-4 shadow-lg",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-base font-bold text-cyan-200",children:[t("noteTotal"),"：",eO.length]}),(0,n.jsx)("button",{className:"ml-2 p-2 rounded-full bg-slate-700 hover:bg-cyan-600 transition-colors text-cyan-300 hover:text-white shadow ".concat(eh||P?"animate-spin":""),title:"zh"===e?"刷新笔记列表":"Refresh notes",onClick:eT,disabled:P||eh,children:(0,n.jsx)(p.Bw1,{size:18})})]}),(0,n.jsx)("button",{onClick:()=>V(!0),disabled:es||!ew||!a||!0!==d,className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 border-0 shadow-lg shadow-cyan-500/25 disabled:opacity-50 px-5 py-2 rounded-lg font-semibold text-white",children:t("newNote")})]})}),(0,n.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,n.jsxs)("div",{className:"w-80 bg-slate-800/30 backdrop-blur-sm border-r border-cyan-500/20 flex flex-col",children:[(0,n.jsx)("div",{className:"p-4 border-b border-slate-700/50",children:(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("input",{placeholder:t("searchPlaceholder"),value:ed,onChange:e=>eu(e.target.value),className:"bg-slate-700/50 border-slate-600/50 text-white placeholder:text-slate-400 focus:border-cyan-500/50 focus:ring-cyan-500/25 rounded-lg py-2 w-full px-4",disabled:es})})}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:P?(0,n.jsx)("div",{className:"flex flex-col gap-3 p-6",children:[1,2,3,4,5].map(e=>(0,n.jsx)("div",{className:"h-12 bg-slate-700/40 rounded-lg animate-pulse"},e))}):0===eC.filter(e=>{let{folderName:t}=e;return t.slice(0,-1).toLowerCase().includes(ed.trim().toLowerCase())}).length?(0,n.jsxs)("div",{className:"p-6 text-center text-slate-400",children:[(0,n.jsx)("span",{className:"w-8 h-8 mx-auto mb-3 bg-slate-500 rounded-full block"}),(0,n.jsx)("p",{className:"text-sm",children:t("noNotes")})]}):(0,n.jsx)("ul",{className:"space-y-2",children:eC.filter(e=>{let{folderName:t}=e;return t.slice(0,-1).toLowerCase().includes(ed.trim().toLowerCase())}).map(t=>{let{folderName:a,lastEdit:s}=t;return(0,n.jsx)("li",{children:(0,n.jsxs)("button",{disabled:ee||eA,className:"w-full text-left px-4 py-3 rounded-lg transition-all border flex items-center justify-between ".concat(J===a?"bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border-cyan-500/50 shadow-lg shadow-cyan-500/10 text-cyan-100":"bg-slate-700/20 border-slate-600/30 text-slate-200 hover:bg-slate-700/50 hover:border-cyan-500/30"),onClick:()=>{eE(a),V(!1)},children:[(0,n.jsx)("span",{className:"truncate font-medium",children:a.slice(0,-1)}),(0,n.jsx)("span",{className:"text-xs text-slate-400 ml-2 flex-shrink-0",children:ek(s,e)})]})},a)})})})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col bg-slate-900/60 backdrop-blur-lg p-8 overflow-y-auto",children:[(0,n.jsx)(g.u,{open:ei,message:t("saving"),onClose:()=>{}}),(0,n.jsx)(g.u,{open:ex,message:t("contentUnchanged"),onClose:()=>eg(!1)}),(0,n.jsx)(g.u,{open:T.open,message:T.message,actionText:T.actionText,onAction:T.onAction||void 0,onClose:T.message===t("bucketNotExist")||T.message===t("noBalance")?()=>window.location.reload():()=>{T.message===t("createdSuccess")&&eb&&(K(eb.content),q(eb.content),W(eb.folder),ev(null)),L(e=>({...e,open:!1}))},lang:e,extraBtn:T.extraBtn}),Q&&(0,n.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-cyan-200",children:t("addNote")}),(0,n.jsxs)("div",{className:"flex gap-2 mr-4",children:[(0,n.jsx)("button",{className:"px-4 py-1 rounded-lg bg-gradient-to-r from-green-400 to-cyan-500 text-white font-semibold shadow hover:from-green-500 hover:to-cyan-600 mr-2",onClick:eB,disabled:O,children:t("save")}),(0,n.jsx)("button",{className:"px-4 py-1 rounded-lg bg-gradient-to-r from-slate-600 to-slate-800 text-white font-semibold shadow hover:from-slate-700 hover:to-slate-900",onClick:()=>V(!1),disabled:O,children:t("cancel")})]})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,n.jsx)("input",{className:"w-full px-4 py-2 rounded-lg bg-slate-800/60 text-white border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500/30 text-lg",placeholder:t("enterNoteName"),value:U,onChange:e=>M(e.target.value),disabled:O,autoFocus:!0}),(0,n.jsx)("textarea",{className:"w-full min-h-[200px] px-4 py-2 rounded-lg bg-slate-800/60 text-white border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500/30 text-lg",placeholder:t("enterContent"),value:z,onChange:e=>$(e.target.value),disabled:O})]})]}),Z?(0,n.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,n.jsx)(v,{})}):Q?null:J?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-cyan-200",children:J.slice(0,-1)}),(0,n.jsxs)("div",{className:"flex gap-2 mr-4",children:[!es&&(0,n.jsx)("button",{className:"px-4 py-1 rounded-lg bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold shadow hover:from-cyan-600 hover:to-blue-600",onClick:()=>eo(!0),children:t("edit")}),es&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"px-4 py-1 rounded-lg bg-gradient-to-r from-green-400 to-cyan-500 text-white font-semibold shadow hover:from-green-500 hover:to-cyan-600 mr-2",onClick:eL,children:t("save")}),(0,n.jsx)("button",{className:"px-4 py-1 rounded-lg bg-gradient-to-r from-slate-600 to-slate-800 text-white font-semibold shadow hover:from-slate-700 hover:to-slate-900",onClick:()=>{q(Y),eo(!1)},children:t("cancel")})]})]})]}),(0,n.jsx)("div",{className:"flex-1",children:es?(0,n.jsx)("textarea",{className:"w-full min-h-[200px] bg-slate-800/60 rounded-xl p-6 text-lg text-slate-100 shadow-inner focus:outline-none focus:ring-2 focus:ring-cyan-500/50",value:X,onChange:e=>q(e.target.value),autoFocus:!0}):(0,n.jsx)("pre",{className:"whitespace-pre-wrap break-words bg-slate-800/60 rounded-xl p-6 text-lg text-slate-100 shadow-inner min-h-[200px]",children:Y||(0,n.jsx)("span",{className:"text-slate-500",children:t("noContent")})})}),eA?(0,n.jsx)("div",{className:"mt-6 flex items-center justify-center",children:(0,n.jsx)(v,{})}):er.length>0&&(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,n.jsx)("span",{className:"text-cyan-300 font-semibold text-base",children:t("reviewRecords")}),(0,n.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-xs font-bold shadow",children:[t("reviewTotal"),"：",er.length]})]}),(0,n.jsx)("div",{className:"overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-cyan-600/60 scrollbar-track-slate-800/40",children:(0,n.jsx)("div",{className:"flex gap-4 min-w-[320px]",children:er.map((a,s)=>(0,n.jsxs)("div",{className:"flex-shrink-0 w-80 bg-gradient-to-br from-slate-800/80 via-slate-900/80 to-slate-800/80 border border-cyan-500/20 rounded-2xl shadow-lg p-5 transition-transform hover:scale-105",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsx)("span",{className:"text-slate-400 text-sm font-medium",children:t("reviewTime")}),(0,n.jsx)("span",{className:"text-cyan-400 text-sm font-semibold",children:ek(a.time,e)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsx)("span",{className:"text-slate-400 text-sm font-medium",children:t("reviewScore")}),(0,n.jsx)("span",{className:"text-blue-400 text-sm font-semibold",children:"number"==typeof a.score?"".concat(10*a.score,"%"):"-"})]}),(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-slate-400 text-sm font-medium mb-1",children:t("memoryBefore")}),(0,n.jsx)("div",{className:"bg-slate-800/60 rounded-lg px-3 py-2 text-slate-100 text-sm min-h-[36px] break-words shadow-inner",children:a.memoryBefore||a.beforeNote||(0,n.jsx)("span",{className:"text-slate-500",children:"-"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-slate-400 text-sm font-medium mb-1",children:t("memoryAfter")}),(0,n.jsx)("div",{className:"bg-slate-800/60 rounded-lg px-3 py-2 text-slate-100 text-sm min-h-[36px] break-words shadow-inner",children:a.memoryAfter||a.afterNote||(0,n.jsx)("span",{className:"text-slate-500",children:"-"})})]})]},s))})})]})]}):(0,n.jsx)("div",{className:"flex-1 flex items-center justify-center text-slate-500 text-lg",children:t("selectNote")})]})]})]})};function B(){let{lang:e,setLang:t}=(0,s.ZK)(),{t:a}=(0,l.Q)(e),o=(0,h.t)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"".concat(a("navNotes")," - ").concat(a("appTitle"))}),(0,n.jsx)("meta",{name:"description",content:a("appDesc")}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,n.jsx)(i.Z,{lang:e,setLang:t}),(0,n.jsx)("main",{style:{minHeight:"80vh",background:"linear-gradient(135deg, #0f2027 0%, #2c5364 100%)",fontFamily:"Segoe UI, Roboto, Arial, sans-serif",color:"#e0e7ef",boxShadow:"0 0 40px #0ff2, 0 0 120px #1e90ff44 inset"},children:o?(0,n.jsx)(S,{}):null})]})}},26558:function(e,t,a){"use strict";a.d(t,{o:function(){return o}});var n=a(50043),s=a(95740);let o=async(e,t)=>{let a=localStorage.getItem(e);if(a){let t=JSON.parse(a);if(t.expirationTime<Date.now()){alert("Your auth key has expired, please generate a new one"),localStorage.removeItem(e);return}return t}let o=await (0,n.Db)(),r=await n.Lp.offchainauth.genOffChainAuthKeyPairAndUpload({sps:o,chainId:s.pF,expirationMs:432e6,domain:window.location.origin,address:e},t),{code:l,body:i}=r;if(0!==l||!i)throw r;return localStorage.setItem(e,JSON.stringify(i)),i}},993:function(){},46601:function(){},89214:function(){},85568:function(){},20131:function(){},16026:function(){},24654:function(){},88924:function(){},55024:function(){}},function(e){e.O(0,[3417,6792,3714,7878,1311,8742,6035,3631,9506,8764,7252,5640,5174,779,366,9774,2888,179],function(){return e(e.s=33477)}),_N_E=e.O()}]);